"use strict";var t=require("path"),e=require("pacote"),s=require("url"),i=require("os"),r=require("util"),n=require("fs"),o=require("child_process"),a=require("events"),h=require("stream"),l=require("string_decoder"),c=require("assert"),u=require("buffer"),p=require("zlib"),d=require("crypto");function f(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var m=f(t),y=f(e),g=f(s),E=f(i),w=f(r),b=f(n),S=f(o),v=f(a),R=f(h),O=f(l),_=f(c),I=f(u),T=f(p),A=f(d),L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function N(t){var e={exports:{}};return t(e,e.exports),e.exports}var k=["assert","buffer","child_process","cluster","console","constants","crypto","dgram","dns","domain","events","fs","http","https","module","net","os","path","process","punycode","querystring","readline","repl","stream","string_decoder","timers","tls","tty","url","util","v8","vm","zlib"],D=N((function(t){var e=new RegExp("^(?:@([^/]+?)[/])?([^/]+?)$"),s=["node_modules","favicon.ico"];(t.exports=function(t){var r=[],n=[];if(null===t)return n.push("name cannot be null"),i(r,n);if(void 0===t)return n.push("name cannot be undefined"),i(r,n);if("string"!=typeof t)return n.push("name must be a string"),i(r,n);if(t.length||n.push("name length must be greater than zero"),t.match(/^\./)&&n.push("name cannot start with a period"),t.match(/^_/)&&n.push("name cannot start with an underscore"),t.trim()!==t&&n.push("name cannot contain leading or trailing spaces"),s.forEach((function(e){t.toLowerCase()===e&&n.push(e+" is a blacklisted name")})),k.forEach((function(e){t.toLowerCase()===e&&r.push(e+" is a core module name")})),t.length>214&&r.push("name can no longer contain more than 214 characters"),t.toLowerCase()!==t&&r.push("name can no longer contain capital letters"),/[~'!()*]/.test(t.split("/").slice(-1)[0])&&r.push('name can no longer contain special characters ("~\'!()*")'),encodeURIComponent(t)!==t){var o=t.match(e);if(o){var a=o[1],h=o[2];if(encodeURIComponent(a)===a&&encodeURIComponent(h)===h)return i(r,n)}n.push("name can only contain URL-friendly characters")}return i(r,n)}).scopedPackagePattern=e;var i=function(t,e){var s={validForNewPackages:0===e.length&&0===t.length,validForOldPackages:0===e.length,warnings:t,errors:e};return s.warnings.length||delete s.warnings,s.errors.length||delete s.errors,s}})),C=N((function(t){var e=t.exports={github:{protocols:["git","http","git+ssh","git+https","ssh","https"],domain:"github.com",treepath:"tree",filetemplate:"https://{auth@}raw.githubusercontent.com/{user}/{project}/{committish}/{path}",bugstemplate:"https://{domain}/{user}/{project}/issues",gittemplate:"git://{auth@}{domain}/{user}/{project}.git{#committish}",tarballtemplate:"https://codeload.{domain}/{user}/{project}/tar.gz/{committish}"},bitbucket:{protocols:["git+ssh","git+https","ssh","https"],domain:"bitbucket.org",treepath:"src",tarballtemplate:"https://{domain}/{user}/{project}/get/{committish}.tar.gz"},gitlab:{protocols:["git+ssh","git+https","ssh","https"],domain:"gitlab.com",treepath:"tree",bugstemplate:"https://{domain}/{user}/{project}/issues",httpstemplate:"git+https://{auth@}{domain}/{user}/{projectPath}.git{#committish}",tarballtemplate:"https://{domain}/{user}/{project}/repository/archive.tar.gz?ref={committish}",pathmatch:/^\/([^/]+)\/((?!.*(\/-\/|\/repository(\/[^/]+)?\/archive\.tar\.gz)).*?)(?:\.git|\/)?$/},gist:{protocols:["git","git+ssh","git+https","ssh","https"],domain:"gist.github.com",pathmatch:/^[/](?:([^/]+)[/])?([a-z0-9]{7,})(?:[.]git)?$/,filetemplate:"https://gist.githubusercontent.com/{user}/{project}/raw{/committish}/{path}",bugstemplate:"https://{domain}/{project}",gittemplate:"git://{domain}/{project}.git{#committish}",sshtemplate:"git@{domain}:/{project}.git{#committish}",sshurltemplate:"git+ssh://git@{domain}/{project}.git{#committish}",browsetemplate:"https://{domain}/{project}{/committish}",browsefiletemplate:"https://{domain}/{project}{/committish}{#path}",docstemplate:"https://{domain}/{project}{/committish}",httpstemplate:"git+https://{domain}/{project}.git{#committish}",shortcuttemplate:"{type}:{project}{#committish}",pathtemplate:"{project}{#committish}",tarballtemplate:"https://codeload.github.com/gist/{project}/tar.gz/{committish}",hashformat:function(t){return"file-"+i(t)}}},s={sshtemplate:"git@{domain}:{user}/{project}.git{#committish}",sshurltemplate:"git+ssh://git@{domain}/{user}/{project}.git{#committish}",browsetemplate:"https://{domain}/{user}/{project}{/tree/committish}",browsefiletemplate:"https://{domain}/{user}/{project}/{treepath}/{committish}/{path}{#fragment}",docstemplate:"https://{domain}/{user}/{project}{/tree/committish}#readme",httpstemplate:"git+https://{auth@}{domain}/{user}/{project}.git{#committish}",filetemplate:"https://{domain}/{user}/{project}/raw/{committish}/{path}",shortcuttemplate:"{type}:{user}/{project}{#committish}",pathtemplate:"{user}/{project}{#committish}",pathmatch:/^[/]([^/]+)[/]([^/]+?)(?:[.]git|[/])?$/,hashformat:i};function i(t){return t.toLowerCase().replace(/^\W+|\/|\W+$/g,"").replace(/\W+/g,"-")}Object.keys(e).forEach((function(t){Object.keys(s).forEach((function(i){e[t][i]||(e[t][i]=s[i])})),e[t].protocols_re=RegExp("^("+e[t].protocols.map((function(t){return t.replace(/([\\+*{}()[\]$^|])/g,"\\$1")})).join("|")+"):$")}))})),$=Object.assign||function(t,e){if(null===e||"object"!=typeof e)return t;const s=Object.keys(e);let i=s.length;for(;i--;)t[s[i]]=e[s[i]];return t},x=P;function P(t,e,s,i,r,n,o){var a=this;a.type=t,Object.keys(C[t]).forEach((function(e){a[e]=C[t][e]})),a.user=e,a.auth=s,a.project=i,a.committish=r,a.default=n,a.opts=o||{}}P.prototype.hash=function(){return this.committish?"#"+this.committish:""},P.prototype._fill=function(t,e){if(t){var s=$({},e);s.path=s.path?s.path.replace(/^[/]+/g,""):"",e=$($({},this.opts),e);var i=this;Object.keys(this).forEach((function(t){null!=i[t]&&null==s[t]&&(s[t]=i[t])}));var r=s.auth,n=s.committish,o=s.fragment,a=s.path,h=s.project;Object.keys(s).forEach((function(t){var e=s[t];"path"!==t&&"project"!==t||"string"!=typeof e?"domain"!==t&&(s[t]=encodeURIComponent(e)):s[t]=e.split("/").map((function(t){return encodeURIComponent(t)})).join("/")})),s["auth@"]=r?r+"@":"",s["#fragment"]=o?"#"+this.hashformat(o):"",s.fragment=s.fragment?s.fragment:"",s["#path"]=a?"#"+this.hashformat(a):"",s["/path"]=s.path?"/"+s.path:"",s.projectPath=h.split("/").map(encodeURIComponent).join("/"),e.noCommittish?(s["#committish"]="",s["/tree/committish"]="",s["/committish"]="",s.committish=""):(s["#committish"]=n?"#"+n:"",s["/tree/committish"]=s.committish?"/"+s.treepath+"/"+s.committish:"",s["/committish"]=s.committish?"/"+s.committish:"",s.committish=s.committish||"master");var l=t;return Object.keys(s).forEach((function(t){l=l.replace(new RegExp("[{]"+t+"[}]","g"),s[t])})),e.noGitPlus?l.replace(/^git[+]/,""):l}},P.prototype.ssh=function(t){return this._fill(this.sshtemplate,t)},P.prototype.sshurl=function(t){return this._fill(this.sshurltemplate,t)},P.prototype.browse=function(t,e,s){return"string"==typeof t?("string"!=typeof e&&(s=e,e=null),this._fill(this.browsefiletemplate,$({fragment:e,path:t},s))):this._fill(this.browsetemplate,t)},P.prototype.docs=function(t){return this._fill(this.docstemplate,t)},P.prototype.bugs=function(t){return this._fill(this.bugstemplate,t)},P.prototype.https=function(t){return this._fill(this.httpstemplate,t)},P.prototype.git=function(t){return this._fill(this.gittemplate,t)},P.prototype.shortcut=function(t){return this._fill(this.shortcuttemplate,t)},P.prototype.path=function(t){return this._fill(this.pathtemplate,t)},P.prototype.tarball=function(t){var e=$({},t,{noCommittish:!1});return this._fill(this.tarballtemplate,e)},P.prototype.file=function(t,e){return this._fill(this.filetemplate,$({path:t},e))},P.prototype.getDefaultRepresentation=function(){return this.default},P.prototype.toString=function(t){return this.default&&"function"==typeof this[this.default]?this[this.default](t):this.sshurl(t)};var M=F;function F(t){var e=this;if(e instanceof F||(e=new F),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var s=0,i=arguments.length;s<i;s++)e.push(arguments[s]);return e}function B(t,e,s){var i=e===t.head?new z(s,null,e,t):new z(s,e,e.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function j(t,e){t.tail=new z(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function U(t,e){t.head=new z(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function z(t,e,s,i){if(!(this instanceof z))return new z(t,e,s,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}F.Node=z,F.create=F,F.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,s=t.prev;return e&&(e.prev=s),s&&(s.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=s),t.list.length--,t.next=null,t.prev=null,t.list=null,e},F.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},F.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},F.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)j(this,arguments[t]);return this.length},F.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)U(this,arguments[t]);return this.length},F.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},F.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},F.prototype.forEach=function(t,e){e=e||this;for(var s=this.head,i=0;null!==s;i++)t.call(e,s.value,i,this),s=s.next},F.prototype.forEachReverse=function(t,e){e=e||this;for(var s=this.tail,i=this.length-1;null!==s;i--)t.call(e,s.value,i,this),s=s.prev},F.prototype.get=function(t){for(var e=0,s=this.head;null!==s&&e<t;e++)s=s.next;if(e===t&&null!==s)return s.value},F.prototype.getReverse=function(t){for(var e=0,s=this.tail;null!==s&&e<t;e++)s=s.prev;if(e===t&&null!==s)return s.value},F.prototype.map=function(t,e){e=e||this;for(var s=new F,i=this.head;null!==i;)s.push(t.call(e,i.value,this)),i=i.next;return s},F.prototype.mapReverse=function(t,e){e=e||this;for(var s=new F,i=this.tail;null!==i;)s.push(t.call(e,i.value,this)),i=i.prev;return s},F.prototype.reduce=function(t,e){var s,i=this.head;if(arguments.length>1)s=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,s=this.head.value}for(var r=0;null!==i;r++)s=t(s,i.value,r),i=i.next;return s},F.prototype.reduceReverse=function(t,e){var s,i=this.tail;if(arguments.length>1)s=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,s=this.tail.value}for(var r=this.length-1;null!==i;r--)s=t(s,i.value,r),i=i.prev;return s},F.prototype.toArray=function(){for(var t=new Array(this.length),e=0,s=this.head;null!==s;e++)t[e]=s.value,s=s.next;return t},F.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,s=this.tail;null!==s;e++)t[e]=s.value,s=s.prev;return t},F.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var s=new F;if(e<t||e<0)return s;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,r=this.head;null!==r&&i<t;i++)r=r.next;for(;null!==r&&i<e;i++,r=r.next)s.push(r.value);return s},F.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var s=new F;if(e<t||e<0)return s;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,r=this.tail;null!==r&&i>e;i--)r=r.prev;for(;null!==r&&i>t;i--,r=r.prev)s.push(r.value);return s},F.prototype.splice=function(t,e,...s){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,r=this.head;null!==r&&i<t;i++)r=r.next;var n=[];for(i=0;r&&i<e;i++)n.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(i=0;i<s.length;i++)r=B(this,r,s[i]);return n},F.prototype.reverse=function(){for(var t=this.head,e=this.tail,s=t;null!==s;s=s.prev){var i=s.prev;s.prev=s.next,s.next=i}return this.head=e,this.tail=t,this};try{!function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}(F)}catch(t){}const G=Symbol("max"),H=Symbol("length"),Z=Symbol("lengthCalculator"),X=Symbol("allowStale"),V=Symbol("maxAge"),q=Symbol("dispose"),W=Symbol("noDisposeOnSet"),Y=Symbol("lruList"),K=Symbol("cache"),J=Symbol("updateAgeOnGet"),Q=()=>1;const tt=(t,e,s)=>{const i=t[K].get(e);if(i){const e=i.value;if(et(t,e)){if(it(t,i),!t[X])return}else s&&(t[J]&&(i.value.now=Date.now()),t[Y].unshiftNode(i));return e.value}},et=(t,e)=>{if(!e||!e.maxAge&&!t[V])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[V]&&s>t[V]},st=t=>{if(t[H]>t[G])for(let e=t[Y].tail;t[H]>t[G]&&null!==e;){const s=e.prev;it(t,e),e=s}},it=(t,e)=>{if(e){const s=e.value;t[q]&&t[q](s.key,s.value),t[H]-=s.length,t[K].delete(s.key),t[Y].removeNode(e)}};class rt{constructor(t,e,s,i,r){this.key=t,this.value=e,this.length=s,this.now=i,this.maxAge=r||0}}const nt=(t,e,s,i)=>{let r=s.value;et(t,r)&&(it(t,s),t[X]||(r=void 0)),r&&e.call(i,r.value,r.key,t)};var ot=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[G]=t.max||1/0;const e=t.length||Q;if(this[Z]="function"!=typeof e?Q:e,this[X]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[V]=t.maxAge||0,this[q]=t.dispose,this[W]=t.noDisposeOnSet||!1,this[J]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[G]=t||1/0,st(this)}get max(){return this[G]}set allowStale(t){this[X]=!!t}get allowStale(){return this[X]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[V]=t,st(this)}get maxAge(){return this[V]}set lengthCalculator(t){"function"!=typeof t&&(t=Q),t!==this[Z]&&(this[Z]=t,this[H]=0,this[Y].forEach((t=>{t.length=this[Z](t.value,t.key),this[H]+=t.length}))),st(this)}get lengthCalculator(){return this[Z]}get length(){return this[H]}get itemCount(){return this[Y].length}rforEach(t,e){e=e||this;for(let s=this[Y].tail;null!==s;){const i=s.prev;nt(this,t,s,e),s=i}}forEach(t,e){e=e||this;for(let s=this[Y].head;null!==s;){const i=s.next;nt(this,t,s,e),s=i}}keys(){return this[Y].toArray().map((t=>t.key))}values(){return this[Y].toArray().map((t=>t.value))}reset(){this[q]&&this[Y]&&this[Y].length&&this[Y].forEach((t=>this[q](t.key,t.value))),this[K]=new Map,this[Y]=new M,this[H]=0}dump(){return this[Y].map((t=>!et(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[Y]}set(t,e,s){if((s=s||this[V])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");const i=s?Date.now():0,r=this[Z](e,t);if(this[K].has(t)){if(r>this[G])return it(this,this[K].get(t)),!1;const n=this[K].get(t).value;return this[q]&&(this[W]||this[q](t,n.value)),n.now=i,n.maxAge=s,n.value=e,this[H]+=r-n.length,n.length=r,this.get(t),st(this),!0}const n=new rt(t,e,r,i,s);return n.length>this[G]?(this[q]&&this[q](t,e),!1):(this[H]+=n.length,this[Y].unshift(n),this[K].set(t,this[Y].head),st(this),!0)}has(t){if(!this[K].has(t))return!1;const e=this[K].get(t).value;return!et(this,e)}get(t){return tt(this,t,!0)}peek(t){return tt(this,t,!1)}pop(){const t=this[Y].tail;return t?(it(this,t),t.value):null}del(t){it(this,this[K].get(t))}load(t){this.reset();const e=Date.now();for(let s=t.length-1;s>=0;s--){const i=t[s],r=i.e||0;if(0===r)this.set(i.k,i.v);else{const t=r-e;t>0&&this.set(i.k,i.v,t)}}}prune(){this[K].forEach(((t,e)=>tt(this,e,!1)))}},at=N((function(t){var e=t.exports=x,s=new ot({max:1e3}),i={"git+ssh:":"sshurl","git+https:":"https","ssh:":"sshurl","git:":"git"};var r={"git:":!0,"https:":!0,"git+https:":!0,"http:":!0,"git+http:":!0};t.exports.fromUrl=function(t,n){if("string"==typeof t){var o=t+JSON.stringify(n||{});return s.has(o)||s.set(o,function(t,s){if(null==t||""===t)return;var n=function(t){var e=g.default.parse(t);return"gist:"===e.protocol&&e.host&&!e.path?e.protocol+"/"+e.host:t}((l=t,/^[^:@%/\s.-][^:@%/\s]*[/][^:@\s/%]+(?:#.*)?$/.test(l)?"github:"+t:t)),o=function(t){var e=t.match(/^([^@]+)@([^:/]+):[/]?((?:[^/]+[/])?[^/]+?)(?:[.]git)?(#.*)?$/);if(!e){var s=g.default.parse(t);if(s.auth){const e=t.match(/[^@]+@[^:/]+/);if(e){var i=new g.default.URL(e[0]);s.auth=i.username||"",i.password&&(s.auth+=":"+i.password)}}return s}return{protocol:"git+ssh:",slashes:!0,auth:e[1],host:e[2],port:null,hostname:e[2],hash:e[4],search:null,query:null,pathname:"/"+e[3],path:"/"+e[3],href:"git+ssh://"+e[1]+"@"+e[2]+"/"+e[3]+(e[4]||"")}}(n),a=n.match(new RegExp("^([^:]+):(?:(?:[^@:]+(?:[^@]+)?@)?([^/]*))[/](.+?)(?:[.]git)?($|#)")),h=Object.keys(C).map((function(t){try{var n=C[t],h=null;o.auth&&r[o.protocol]&&(h=o.auth);var l=o.hash?decodeURIComponent(o.hash.substr(1)):null,c=null,u=null,p=null;if(a&&a[1]===t)c=a[2]&&decodeURIComponent(a[2]),u=decodeURIComponent(a[3]),p="shortcut";else{if(o.host&&o.host!==n.domain&&o.host.replace(/^www[.]/,"")!==n.domain)return;if(!n.protocols_re.test(o.protocol))return;if(!o.path)return;var d=n.pathmatch,f=o.path.match(d);if(!f)return;null!==f[1]&&void 0!==f[1]&&(c=decodeURIComponent(f[1].replace(/^:/,""))),u=decodeURIComponent(f[2]),m=o.protocol,p=i[m]||m.slice(0,-1)}return new e(t,c,h,u,l,p,s)}catch(t){if(!(t instanceof URIError))throw t}var m})).filter((function(t){return t}));var l;if(1!==h.length)return;return h[0]}(t,n)),s.get(o)}}}));var ht={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16};var lt="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},ct=N((function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:s}=ht,i=(e=t.exports={}).re=[],r=e.src=[],n=e.t={};let o=0;const a=(t,e,s)=>{const a=o++;lt(a,e),n[t]=a,r[a]=e,i[a]=new RegExp(e,s?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","[0-9]+"),a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),a("MAINVERSION",`(${r[n.NUMERICIDENTIFIER]})\\.(${r[n.NUMERICIDENTIFIER]})\\.(${r[n.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${r[n.NUMERICIDENTIFIERLOOSE]})\\.(${r[n.NUMERICIDENTIFIERLOOSE]})\\.(${r[n.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${r[n.NUMERICIDENTIFIER]}|${r[n.NONNUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${r[n.NUMERICIDENTIFIERLOOSE]}|${r[n.NONNUMERICIDENTIFIER]})`),a("PRERELEASE",`(?:-(${r[n.PRERELEASEIDENTIFIER]}(?:\\.${r[n.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${r[n.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${r[n.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER","[0-9A-Za-z-]+"),a("BUILD",`(?:\\+(${r[n.BUILDIDENTIFIER]}(?:\\.${r[n.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${r[n.MAINVERSION]}${r[n.PRERELEASE]}?${r[n.BUILD]}?`),a("FULL",`^${r[n.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${r[n.MAINVERSIONLOOSE]}${r[n.PRERELEASELOOSE]}?${r[n.BUILD]}?`),a("LOOSE",`^${r[n.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",`${r[n.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),a("XRANGEIDENTIFIER",`${r[n.NUMERICIDENTIFIER]}|x|X|\\*`),a("XRANGEPLAIN",`[v=\\s]*(${r[n.XRANGEIDENTIFIER]})(?:\\.(${r[n.XRANGEIDENTIFIER]})(?:\\.(${r[n.XRANGEIDENTIFIER]})(?:${r[n.PRERELEASE]})?${r[n.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${r[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[n.XRANGEIDENTIFIERLOOSE]})(?:${r[n.PRERELEASELOOSE]})?${r[n.BUILD]}?)?)?`),a("XRANGE",`^${r[n.GTLT]}\\s*${r[n.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${r[n.GTLT]}\\s*${r[n.XRANGEPLAINLOOSE]}$`),a("COERCE",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?(?:$|[^\\d])`),a("COERCERTL",r[n.COERCE],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${r[n.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",a("TILDE",`^${r[n.LONETILDE]}${r[n.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${r[n.LONETILDE]}${r[n.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${r[n.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",a("CARET",`^${r[n.LONECARET]}${r[n.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${r[n.LONECARET]}${r[n.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${r[n.GTLT]}\\s*(${r[n.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${r[n.GTLT]}\\s*(${r[n.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${r[n.GTLT]}\\s*(${r[n.LOOSEPLAIN]}|${r[n.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${r[n.XRANGEPLAIN]})\\s+-\\s+(${r[n.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${r[n.XRANGEPLAINLOOSE]})\\s+-\\s+(${r[n.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0.0.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}));const ut=["includePrerelease","loose","rtl"];var pt=t=>t?"object"!=typeof t?{loose:!0}:ut.filter((e=>t[e])).reduce(((t,e)=>(t[e]=!0,t)),{}):{};const dt=/^[0-9]+$/,ft=(t,e)=>{const s=dt.test(t),i=dt.test(e);return s&&i&&(t=+t,e=+e),t===e?0:s&&!i?-1:i&&!s?1:t<e?-1:1};var mt={compareIdentifiers:ft,rcompareIdentifiers:(t,e)=>ft(e,t)};const{MAX_LENGTH:yt,MAX_SAFE_INTEGER:gt}=ht,{re:Et,t:wt}=ct,{compareIdentifiers:bt}=mt;class St{constructor(t,e){if(e=pt(e),t instanceof St){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid Version: ${t}`);if(t.length>yt)throw new TypeError(`version is longer than ${yt} characters`);lt("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const s=t.trim().match(e.loose?Et[wt.LOOSE]:Et[wt.FULL]);if(!s)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>gt||this.major<0)throw new TypeError("Invalid major version");if(this.minor>gt||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>gt||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<gt)return e}return t})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(lt("SemVer.compare",this.version,this.options,t),!(t instanceof St)){if("string"==typeof t&&t===this.version)return 0;t=new St(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof St||(t=new St(t,this.options)),bt(this.major,t.major)||bt(this.minor,t.minor)||bt(this.patch,t.patch)}comparePre(t){if(t instanceof St||(t=new St(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const s=this.prerelease[e],i=t.prerelease[e];if(lt("prerelease compare",e,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return bt(s,i)}while(++e)}compareBuild(t){t instanceof St||(t=new St(t,this.options));let e=0;do{const s=this.build[e],i=t.build[e];if(lt("prerelease compare",e,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return bt(s,i)}while(++e)}inc(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let t=this.prerelease.length;for(;--t>=0;)"number"==typeof this.prerelease[t]&&(this.prerelease[t]++,t=-2);-1===t&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}}var vt=St;const{MAX_LENGTH:Rt}=ht,{re:Ot,t:_t}=ct;var It=(t,e)=>{if(e=pt(e),t instanceof vt)return t;if("string"!=typeof t)return null;if(t.length>Rt)return null;if(!(e.loose?Ot[_t.LOOSE]:Ot[_t.FULL]).test(t))return null;try{return new vt(t,e)}catch(t){return null}};var Tt=(t,e)=>{const s=It(t,e);return s?s.version:null};var At=(t,e)=>{const s=It(t.trim().replace(/^[=v]+/,""),e);return s?s.version:null};var Lt=(t,e,s,i)=>{"string"==typeof s&&(i=s,s=void 0);try{return new vt(t,s).inc(e,i).version}catch(t){return null}};var Nt=(t,e,s)=>new vt(t,s).compare(new vt(e,s));var kt=(t,e,s)=>0===Nt(t,e,s);var Dt=(t,e)=>{if(kt(t,e))return null;{const s=It(t),i=It(e),r=s.prerelease.length||i.prerelease.length,n=r?"pre":"",o=r?"prerelease":"";for(const t in s)if(("major"===t||"minor"===t||"patch"===t)&&s[t]!==i[t])return n+t;return o}};var Ct=(t,e)=>new vt(t,e).major;var $t=(t,e)=>new vt(t,e).minor;var xt=(t,e)=>new vt(t,e).patch;var Pt=(t,e)=>{const s=It(t,e);return s&&s.prerelease.length?s.prerelease:null};var Mt=(t,e,s)=>Nt(e,t,s);var Ft=(t,e)=>Nt(t,e,!0);var Bt=(t,e,s)=>{const i=new vt(t,s),r=new vt(e,s);return i.compare(r)||i.compareBuild(r)};var jt=(t,e)=>t.sort(((t,s)=>Bt(t,s,e)));var Ut=(t,e)=>t.sort(((t,s)=>Bt(s,t,e)));var zt=(t,e,s)=>Nt(t,e,s)>0;var Gt=(t,e,s)=>Nt(t,e,s)<0;var Ht=(t,e,s)=>0!==Nt(t,e,s);var Zt=(t,e,s)=>Nt(t,e,s)>=0;var Xt=(t,e,s)=>Nt(t,e,s)<=0;var Vt=(t,e,s,i)=>{switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof s&&(s=s.version),t===s;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof s&&(s=s.version),t!==s;case"":case"=":case"==":return kt(t,s,i);case"!=":return Ht(t,s,i);case">":return zt(t,s,i);case">=":return Zt(t,s,i);case"<":return Gt(t,s,i);case"<=":return Xt(t,s,i);default:throw new TypeError(`Invalid operator: ${e}`)}};const{re:qt,t:Wt}=ct;var Yt=(t,e)=>{if(t instanceof vt)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let s=null;if((e=e||{}).rtl){let e;for(;(e=qt[Wt.COERCERTL].exec(t))&&(!s||s.index+s[0].length!==t.length);)s&&e.index+e[0].length===s.index+s[0].length||(s=e),qt[Wt.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;qt[Wt.COERCERTL].lastIndex=-1}else s=t.match(qt[Wt.COERCE]);return null===s?null:It(`${s[2]}.${s[3]||"0"}.${s[4]||"0"}`,e)};class Kt{constructor(t,e){if(e=pt(e),t instanceof Kt)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Kt(t.raw,e);if(t instanceof ve)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map((t=>this.parseRange(t.trim()))).filter((t=>t.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){const t=this.set[0];if(this.set=this.set.filter((t=>!ne(t[0]))),0===this.set.length)this.set=[t];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&oe(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((t=>t.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();const e=`parseRange:${Object.keys(this.options).join(",")}:${t}`,s=Qt.get(e);if(s)return s;const i=this.options.loose,r=i?te[ee.HYPHENRANGELOOSE]:te[ee.HYPHENRANGE];t=t.replace(r,Ee(this.options.includePrerelease)),lt("hyphen replace",t),t=t.replace(te[ee.COMPARATORTRIM],se),lt("comparator trim",t,te[ee.COMPARATORTRIM]),t=(t=(t=t.replace(te[ee.TILDETRIM],ie)).replace(te[ee.CARETTRIM],re)).split(/\s+/).join(" ");const n=i?te[ee.COMPARATORLOOSE]:te[ee.COMPARATOR],o=t.split(" ").map((t=>he(t,this.options))).join(" ").split(/\s+/).map((t=>ge(t,this.options))).filter(this.options.loose?t=>!!t.match(n):()=>!0).map((t=>new ve(t,this.options))),a=(o.length,new Map);for(const t of o){if(ne(t))return[t];a.set(t.value,t)}a.size>1&&a.has("")&&a.delete("");const h=[...a.values()];return Qt.set(e,h),h}intersects(t,e){if(!(t instanceof Kt))throw new TypeError("a Range is required");return this.set.some((s=>ae(s,e)&&t.set.some((t=>ae(t,e)&&s.every((s=>t.every((t=>s.intersects(t,e)))))))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new vt(t,this.options)}catch(t){return!1}for(let e=0;e<this.set.length;e++)if(we(this.set[e],t,this.options))return!0;return!1}}var Jt=Kt;const Qt=new ot({max:1e3}),{re:te,t:ee,comparatorTrimReplace:se,tildeTrimReplace:ie,caretTrimReplace:re}=ct,ne=t=>"<0.0.0-0"===t.value,oe=t=>""===t.value,ae=(t,e)=>{let s=!0;const i=t.slice();let r=i.pop();for(;s&&i.length;)s=i.every((t=>r.intersects(t,e))),r=i.pop();return s},he=(t,e)=>(lt("comp",t,e),t=pe(t,e),lt("caret",t),t=ce(t,e),lt("tildes",t),t=fe(t,e),lt("xrange",t),t=ye(t,e),lt("stars",t),t),le=t=>!t||"x"===t.toLowerCase()||"*"===t,ce=(t,e)=>t.trim().split(/\s+/).map((t=>ue(t,e))).join(" "),ue=(t,e)=>{const s=e.loose?te[ee.TILDELOOSE]:te[ee.TILDE];return t.replace(s,((e,s,i,r,n)=>{let o;return lt("tilde",t,e,s,i,r,n),le(s)?o="":le(i)?o=`>=${s}.0.0 <${+s+1}.0.0-0`:le(r)?o=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:n?(lt("replaceTilde pr",n),o=`>=${s}.${i}.${r}-${n} <${s}.${+i+1}.0-0`):o=`>=${s}.${i}.${r} <${s}.${+i+1}.0-0`,lt("tilde return",o),o}))},pe=(t,e)=>t.trim().split(/\s+/).map((t=>de(t,e))).join(" "),de=(t,e)=>{lt("caret",t,e);const s=e.loose?te[ee.CARETLOOSE]:te[ee.CARET],i=e.includePrerelease?"-0":"";return t.replace(s,((e,s,r,n,o)=>{let a;return lt("caret",t,e,s,r,n,o),le(s)?a="":le(r)?a=`>=${s}.0.0${i} <${+s+1}.0.0-0`:le(n)?a="0"===s?`>=${s}.${r}.0${i} <${s}.${+r+1}.0-0`:`>=${s}.${r}.0${i} <${+s+1}.0.0-0`:o?(lt("replaceCaret pr",o),a="0"===s?"0"===r?`>=${s}.${r}.${n}-${o} <${s}.${r}.${+n+1}-0`:`>=${s}.${r}.${n}-${o} <${s}.${+r+1}.0-0`:`>=${s}.${r}.${n}-${o} <${+s+1}.0.0-0`):(lt("no pr"),a="0"===s?"0"===r?`>=${s}.${r}.${n}${i} <${s}.${r}.${+n+1}-0`:`>=${s}.${r}.${n}${i} <${s}.${+r+1}.0-0`:`>=${s}.${r}.${n} <${+s+1}.0.0-0`),lt("caret return",a),a}))},fe=(t,e)=>(lt("replaceXRanges",t,e),t.split(/\s+/).map((t=>me(t,e))).join(" ")),me=(t,e)=>{t=t.trim();const s=e.loose?te[ee.XRANGELOOSE]:te[ee.XRANGE];return t.replace(s,((s,i,r,n,o,a)=>{lt("xRange",t,s,i,r,n,o,a);const h=le(r),l=h||le(n),c=l||le(o),u=c;return"="===i&&u&&(i=""),a=e.includePrerelease?"-0":"",h?s=">"===i||"<"===i?"<0.0.0-0":"*":i&&u?(l&&(n=0),o=0,">"===i?(i=">=",l?(r=+r+1,n=0,o=0):(n=+n+1,o=0)):"<="===i&&(i="<",l?r=+r+1:n=+n+1),"<"===i&&(a="-0"),s=`${i+r}.${n}.${o}${a}`):l?s=`>=${r}.0.0${a} <${+r+1}.0.0-0`:c&&(s=`>=${r}.${n}.0${a} <${r}.${+n+1}.0-0`),lt("xRange return",s),s}))},ye=(t,e)=>(lt("replaceStars",t,e),t.trim().replace(te[ee.STAR],"")),ge=(t,e)=>(lt("replaceGTE0",t,e),t.trim().replace(te[e.includePrerelease?ee.GTE0PRE:ee.GTE0],"")),Ee=t=>(e,s,i,r,n,o,a,h,l,c,u,p,d)=>`${s=le(i)?"":le(r)?`>=${i}.0.0${t?"-0":""}`:le(n)?`>=${i}.${r}.0${t?"-0":""}`:o?`>=${s}`:`>=${s}${t?"-0":""}`} ${h=le(l)?"":le(c)?`<${+l+1}.0.0-0`:le(u)?`<${l}.${+c+1}.0-0`:p?`<=${l}.${c}.${u}-${p}`:t?`<${l}.${c}.${+u+1}-0`:`<=${h}`}`.trim(),we=(t,e,s)=>{for(let s=0;s<t.length;s++)if(!t[s].test(e))return!1;if(e.prerelease.length&&!s.includePrerelease){for(let s=0;s<t.length;s++)if(lt(t[s].semver),t[s].semver!==ve.ANY&&t[s].semver.prerelease.length>0){const i=t[s].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},be=Symbol("SemVer ANY");class Se{static get ANY(){return be}constructor(t,e){if(e=pt(e),t instanceof Se){if(t.loose===!!e.loose)return t;t=t.value}lt("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===be?this.value="":this.value=this.operator+this.semver.version,lt("comp",this)}parse(t){const e=this.options.loose?Re[Oe.COMPARATORLOOSE]:Re[Oe.COMPARATOR],s=t.match(e);if(!s)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==s[1]?s[1]:"","="===this.operator&&(this.operator=""),s[2]?this.semver=new vt(s[2],this.options.loose):this.semver=be}toString(){return this.value}test(t){if(lt("Comparator.test",t,this.options.loose),this.semver===be||t===be)return!0;if("string"==typeof t)try{t=new vt(t,this.options)}catch(t){return!1}return Vt(t,this.operator,this.semver,this.options)}intersects(t,e){if(!(t instanceof Se))throw new TypeError("a Comparator is required");if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),""===this.operator)return""===this.value||new Jt(t.value,e).test(this.value);if(""===t.operator)return""===t.value||new Jt(this.value,e).test(t.semver);const s=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),r=this.semver.version===t.semver.version,n=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),o=Vt(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),a=Vt(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return s||i||r&&n||o||a}}var ve=Se;const{re:Re,t:Oe}=ct;var _e=(t,e,s)=>{try{e=new Jt(e,s)}catch(t){return!1}return e.test(t)};var Ie=(t,e)=>new Jt(t,e).set.map((t=>t.map((t=>t.value)).join(" ").trim().split(" ")));var Te=(t,e,s)=>{let i=null,r=null,n=null;try{n=new Jt(e,s)}catch(t){return null}return t.forEach((t=>{n.test(t)&&(i&&-1!==r.compare(t)||(i=t,r=new vt(i,s)))})),i};var Ae=(t,e,s)=>{let i=null,r=null,n=null;try{n=new Jt(e,s)}catch(t){return null}return t.forEach((t=>{n.test(t)&&(i&&1!==r.compare(t)||(i=t,r=new vt(i,s)))})),i};var Le=(t,e)=>{t=new Jt(t,e);let s=new vt("0.0.0");if(t.test(s))return s;if(s=new vt("0.0.0-0"),t.test(s))return s;s=null;for(let e=0;e<t.set.length;++e){const i=t.set[e];let r=null;i.forEach((t=>{const e=new vt(t.semver.version);switch(t.operator){case">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case"":case">=":r&&!zt(e,r)||(r=e);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}})),!r||s&&!zt(s,r)||(s=r)}return s&&t.test(s)?s:null};var Ne=(t,e)=>{try{return new Jt(t,e).range||"*"}catch(t){return null}};const{ANY:ke}=ve;var De=(t,e,s,i)=>{let r,n,o,a,h;switch(t=new vt(t,i),e=new Jt(e,i),s){case">":r=zt,n=Xt,o=Gt,a=">",h=">=";break;case"<":r=Gt,n=Zt,o=zt,a="<",h="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(_e(t,e,i))return!1;for(let s=0;s<e.set.length;++s){const l=e.set[s];let c=null,u=null;if(l.forEach((t=>{t.semver===ke&&(t=new ve(">=0.0.0")),c=c||t,u=u||t,r(t.semver,c.semver,i)?c=t:o(t.semver,u.semver,i)&&(u=t)})),c.operator===a||c.operator===h)return!1;if((!u.operator||u.operator===a)&&n(t,u.semver))return!1;if(u.operator===h&&o(t,u.semver))return!1}return!0};var Ce=(t,e,s)=>De(t,e,">",s);var $e=(t,e,s)=>De(t,e,"<",s);var xe=(t,e,s)=>(t=new Jt(t,s),e=new Jt(e,s),t.intersects(e));const{ANY:Pe}=ve,Me=(t,e,s)=>{if(t===e)return!0;if(1===t.length&&t[0].semver===Pe)return 1===e.length&&e[0].semver===Pe;const i=new Set;let r,n,o,a,h,l,c;for(const e of t)">"===e.operator||">="===e.operator?r=Fe(r,e,s):"<"===e.operator||"<="===e.operator?n=Be(n,e,s):i.add(e.semver);if(i.size>1)return null;if(r&&n){if(o=Nt(r.semver,n.semver,s),o>0)return null;if(0===o&&(">="!==r.operator||"<="!==n.operator))return null}for(const t of i){if(r&&!_e(t,String(r),s))return null;if(n&&!_e(t,String(n),s))return null;for(const i of e)if(!_e(t,String(i),s))return!1;return!0}for(const t of e){if(c=c||">"===t.operator||">="===t.operator,l=l||"<"===t.operator||"<="===t.operator,r)if(">"===t.operator||">="===t.operator){if(a=Fe(r,t,s),a===t&&a!==r)return!1}else if(">="===r.operator&&!_e(r.semver,String(t),s))return!1;if(n)if("<"===t.operator||"<="===t.operator){if(h=Be(n,t,s),h===t&&h!==n)return!1}else if("<="===n.operator&&!_e(n.semver,String(t),s))return!1;if(!t.operator&&(n||r)&&0!==o)return!1}return!(r&&l&&!n&&0!==o)&&!(n&&c&&!r&&0!==o)},Fe=(t,e,s)=>{if(!t)return e;const i=Nt(t.semver,e.semver,s);return i>0?t:i<0||">"===e.operator&&">="===t.operator?e:t},Be=(t,e,s)=>{if(!t)return e;const i=Nt(t.semver,e.semver,s);return i<0?t:i>0||"<"===e.operator&&"<="===t.operator?e:t};var je=(t,e,s)=>{if(t===e)return!0;t=new Jt(t,s),e=new Jt(e,s);let i=!1;t:for(const r of t.set){for(const t of e.set){const e=Me(r,t,s);if(i=i||null!==e,e)continue t}if(i)return!1}return!0},Ue={re:ct.re,src:ct.src,tokens:ct.t,SEMVER_SPEC_VERSION:ht.SEMVER_SPEC_VERSION,SemVer:vt,compareIdentifiers:mt.compareIdentifiers,rcompareIdentifiers:mt.rcompareIdentifiers,parse:It,valid:Tt,clean:At,inc:Lt,diff:Dt,major:Ct,minor:$t,patch:xt,prerelease:Pt,compare:Nt,rcompare:Mt,compareLoose:Ft,compareBuild:Bt,sort:jt,rsort:Ut,gt:zt,lt:Gt,eq:kt,neq:Ht,gte:Zt,lte:Xt,cmp:Vt,coerce:Yt,Comparator:ve,Range:Jt,satisfies:_e,toComparators:Ie,maxSatisfying:Te,minSatisfying:Ae,minVersion:Le,validRange:Ne,outside:De,gtr:Ce,ltr:$e,intersects:xe,simplifyRange:(t,e,s)=>{const i=[];let r=null,n=null;const o=t.sort(((t,e)=>Nt(t,e,s)));for(const t of o){_e(t,e,s)?(n=t,r||(r=t)):(n&&i.push([r,n]),n=null,r=null)}r&&i.push([r,null]);const a=[];for(const[t,e]of i)t===e?a.push(t):e||t!==o[0]?e?t===o[0]?a.push(`<=${e}`):a.push(`${t} - ${e}`):a.push(`>=${t}`):a.push("*");const h=a.join(" || "),l="string"==typeof e.raw?e.raw:String(e);return h.length<l.length?h:e},subset:je},ze=ss,Ge=rs,He=ns;let Ze,Xe,Ve,qe,We,Ye;function Ke(){return qe||(qe=m.default),qe}const Je="win32"===process.platform||L.FAKE_WINDOWS,Qe=Je?/\\|[/]/:/[/]/,ts=/^(?:git[+])?[a-z]+:/i,es=/[.](?:tgz|tar.gz|tar)$/i;function ss(t,e){let s,i;if("object"==typeof t)return t instanceof ns&&(!e||e===t.where)?t:t.name&&t.rawSpec?ss.resolve(t.name,t.rawSpec,e||t.where):ss(t.raw,e||t.where);const r="@"===t[0]?t.slice(1).indexOf("@")+1:t.indexOf("@"),n=r>0?t.slice(0,r):t;if(ts.test(t))i=t;else if("@"!==n[0]&&(Qe.test(n)||es.test(n)))i=t;else if(r>0)s=n,i=t.slice(r+1);else{We||(We=D);We(t).validForOldPackages?s=t:i=t}return rs(s,i,e,t)}const is=Je?/^(?:[.]|~[/]|[/\\]|[a-zA-Z]:)/:/^(?:[.]|~[/]|[/]|[a-zA-Z]:)/;function rs(t,e,s,i){const r=new ns({raw:i,name:t,rawSpec:e,fromArgument:null!=i});if(t&&r.setName(t),e&&(is.test(e)||/^file:/i.test(e)))return ls(r,s);if(e&&/^npm:/i.test(e))return function(t,e){const s=ss(t.rawSpec.substr(4),e);if("alias"===s.type)throw new Error("nested aliases not supported");if(!s.registry)throw new Error("aliases only work for registry deps");return t.subSpec=s,t.registry=!0,t.type="alias",t.saveSpec=null,t.fetchSpec=null,t}(r,s);Xe||(Xe=at);const n=Xe.fromUrl(e,{noGitPlus:!0,noCommittish:!0});return n?function(t,e){return t.type="git",t.hosted=e,t.saveSpec=e.toString({noGitPlus:!1,noCommittish:!1}),t.fetchSpec="shortcut"===e.getDefaultRepresentation()?null:e.toString(),os(t,e.committish)}(r,n):e&&ts.test(e)?function(t){Ze||(Ze=g.default);const e=Ze.parse(t.rawSpec);switch(t.saveSpec=t.rawSpec,e.protocol){case"git:":case"git+http:":case"git+https:":case"git+rsync:":case"git+ftp:":case"git+file:":case"git+ssh:":t.type="git";const s="git+ssh:"===e.protocol&&function(t){const e=t.match(/^git\+ssh:\/\/([^:#]+:[^#]+(?:\.git)?)(?:#(.*))?$/i);return e&&!e[1].match(/:[0-9]+\/?.*$/i)&&{fetchSpec:e[1],gitCommittish:null==e[2]?null:e[2]}}(t.rawSpec);s?(os(t,s.gitCommittish),t.fetchSpec=s.fetchSpec):(os(t,null!=e.hash?e.hash.slice(1):""),e.protocol=e.protocol.replace(/^git[+]/,""),"file:"===e.protocol&&/^git\+file:\/\/[a-z]:/i.test(t.rawSpec)&&(e.host+=":",e.hostname+=":"),delete e.hash,t.fetchSpec=Ze.format(e));break;case"http:":case"https:":t.type="remote",t.fetchSpec=t.saveSpec;break;default:throw function(t,e){const s=new Error(`Unsupported URL Type "${t}": ${e}`);return s.code="EUNSUPPORTEDPROTOCOL",s}(e.protocol,t.rawSpec)}return t}(r):e&&(Qe.test(e)||es.test(e))?ls(r,s):function(t){t.registry=!0;const e=""===t.rawSpec?"latest":t.rawSpec;t.saveSpec=null,t.fetchSpec=e,Ve||(Ve=Ue);const s=Ve.valid(e,!0),i=Ve.validRange(e,!0);if(s)t.type="version";else if(i)t.type="range";else{if(encodeURIComponent(e)!==e)throw function(t){const e=new Error(`Invalid tag name "${t}": Tags may not have any characters that encodeURIComponent encodes.`);return e.code="EINVALIDTAGNAME",e}(e);t.type="tag"}return t}(r)}function ns(t){this.type=t.type,this.registry=t.registry,this.where=t.where,null==t.raw?this.raw=t.name?t.name+"@"+t.rawSpec:t.rawSpec:this.raw=t.raw,this.name=void 0,this.escapedName=void 0,this.scope=void 0,this.rawSpec=null==t.rawSpec?"":t.rawSpec,this.saveSpec=t.saveSpec,this.fetchSpec=t.fetchSpec,t.name&&this.setName(t.name),this.gitRange=t.gitRange,this.gitCommittish=t.gitCommittish,this.hosted=t.hosted}function os(t,e){return null!=e&&e.length>=7&&"semver:"===e.slice(0,7)?(t.gitRange=decodeURIComponent(e.slice(7)),t.gitCommittish=null):t.gitCommittish=""===e?null:e,t}ns.prototype.setName=function(t){We||(We=D);const e=We(t);if(!e.validForOldPackages)throw function(t,e){const s=new Error(`Invalid package name "${t}": ${e.errors.join("; ")}`);return s.code="EINVALIDPACKAGENAME",s}(t,e);return this.name=t,this.scope="@"===t[0]?t.slice(0,t.indexOf("/")):void 0,this.escapedName=t.replace("/","%2f"),this},ns.prototype.toString=function(){const t=[];null!=this.name&&""!==this.name&&t.push(this.name);const e=this.saveSpec||this.fetchSpec||this.rawSpec;return null!=e&&""!==e&&t.push(e),t.length?t.join("@"):this.raw},ns.prototype.toJSON=function(){const t=Object.assign({},this);return delete t.hosted,t};const as=/^[/]|^[A-Za-z]:/;function hs(t,e){return as.test(e)?e:Ke().resolve(t,e)}function ls(t,e){e||(e=process.cwd()),t.type=es.test(t.rawSpec)?"file":"directory",t.where=e;const s=t.rawSpec.replace(/\\/g,"/").replace(/^file:[/]*([A-Za-z]:)/,"$1").replace(/^file:(?:[/]*([~./]))?/,"$1");var i;return/^~[/]/.test(s)?(Ye||(Ye=E.default),t.fetchSpec=hs(Ye.homedir(),s.slice(2)),t.saveSpec="file:"+s):(t.fetchSpec=hs(e,s),"/"===(i=s)[0]||/^[A-Za-z]:/.test(i)?t.saveSpec="file:"+s:t.saveSpec="file:"+Ke().relative(e,t.fetchSpec)),t}ze.resolve=Ge,ze.Result=He;class cs extends SyntaxError{constructor(t,e,s,i){const r=((t,e,s)=>{if(!e)return{message:t.message+" while parsing empty string",position:0};const i=t.message.match(/^Unexpected token (.) .*position\s+(\d+)/i),r=i?+i[2]:t.message.match(/^Unexpected end of JSON.*/i)?e.length-1:null,n=i?t.message.replace(/^Unexpected token ./,`Unexpected token ${JSON.stringify(i[1])} (${(t=>{const e=t.charCodeAt(0).toString(16).toUpperCase();return"0x"+(e.length%2?"0":"")+e})(i[1])})`):t.message;if(null!=r){const t=r<=s?0:r-s,i=r+s>=e.length?e.length:r+s,o=(0===t?"":"...")+e.slice(t,i)+(i===e.length?"":"...");return{message:n+` while parsing ${e===o?"":"near "}${JSON.stringify(o)}`,position:r}}return{message:n+` while parsing '${e.slice(0,2*s)}'`,position:0}})(t,e,s=s||20);super(r.message),Object.assign(this,r),this.code="EJSONPARSE",this.systemError=t,Error.captureStackTrace(this,i||this.constructor)}get name(){return this.constructor.name}set name(t){}get[Symbol.toStringTag](){return this.constructor.name}}const us=Symbol.for("indent"),ps=Symbol.for("newline"),ds=/^\s*[{\[]((?:\r?\n)+)([\s\t]*)/,fs=/^(?:\{\}|\[\])((?:\r?\n)+)?$/,ms=(t,e,s)=>{const i=ys(t);s=s||20;try{const[,t="\n",s="  "]=i.match(fs)||i.match(ds)||[,"",""],r=JSON.parse(i,e);return r&&"object"==typeof r&&(r[ps]=t,r[us]=s),r}catch(e){if("string"!=typeof t&&!Buffer.isBuffer(t)){const s=Array.isArray(t)&&0===t.length;throw Object.assign(new TypeError(`Cannot parse ${s?"an empty array":String(t)}`),{code:"EJSONPARSE",systemError:e})}throw new cs(e,i,s,ms)}},ys=t=>String(t).replace(/^\uFEFF/,"");var gs=ms;ms.JSONParseError=cs,ms.noExceptions=(t,e)=>{try{return JSON.parse(ys(t),e)}catch(t){}};const{join:Es,basename:ws}=m.default,bs=t=>t.name?(t.bin={[t.name]:t.bin},Rs(t)):vs(t),Ss=t=>(t.bin=t.bin.reduce(((t,e)=>(t[ws(e)]=e,t)),{}),Rs(t)),vs=t=>(delete t.bin,t),Rs=t=>{const e=t.bin,s={};let i=!1;return Object.keys(e).forEach((t=>{const r=Es("/",ws(t.replace(/\\|:/g,"/"))).substr(1);if("string"!=typeof e[t]||!r)return;const n=Es("/",e[t]).replace(/\\/g,"/").substr(1);n&&(s[r]=n,i=!0)})),i?t.bin=s:delete t.bin,t};var Os=t=>t.bin?"string"==typeof t.bin?bs(t):Array.isArray(t.bin)?Ss(t):"object"==typeof t.bin?Rs(t):vs(t):vs(t);const{promisify:_s}=w.default,Is=_s(b.default.readFile),Ts=t=>Is(t,"utf8").then((t=>As(gs(t)))).catch((e=>{throw e.path=t,e})),As=t=>(Ls(t),ks(t),Ns(t),Ds(t),Cs(t),Os(t),t);Ts.normalize=As;const Ls=t=>(t.name&&t.version&&(t._id=`${t.name}@${t.version}`),t),Ns=t=>{const e=t.optionalDependencies;if(e&&"object"==typeof e){t.dependencies=t.dependencies||{};for(const[s,i]of Object.entries(e))t.dependencies[s]=i}return t},ks=t=>{const e=t.bundledDependencies,s=void 0===t.bundleDependencies?e:t.bundleDependencies;return!1===s?t.bundleDependencies=[]:!0===s?t.bundleDependencies=Object.keys(t.dependencies||{}):s&&"object"==typeof s?Array.isArray(s)?t.bundleDependencies=s:t.bundleDependencies=Object.keys(s):delete t.bundleDependencies,delete t.bundledDependencies,t},Ds=t=>{if(!t.scripts||"object"!=typeof t.scripts)return delete t.scripts,t;for(const[e,s]of Object.entries(t.scripts))"string"!=typeof s&&delete t.scripts[e];return t},Cs=t=>(t.funding&&"string"==typeof t.funding&&(t.funding={url:t.funding}),t);var $s=Ts;var xs="win32"===(process.env.__FAKE_TESTING_PLATFORM__||process.platform);const{resolve:Ps,dirname:Ms}=m.default,Fs=Ps(__dirname,"../lib/node-gyp-bin");var Bs=(t,e)=>{const s=xs?";":":",i=Object.keys(e).filter((t=>/^path$/i.test(t)&&e[t])).map((t=>e[t].split(s))).reduce(((t,e)=>t.concat(e.filter((e=>!t.includes(e))))),[]).join(s),r=[];let n,o=t;do{r.push(Ps(o,"node_modules",".bin")),n=o,o=Ms(o)}while(o!==n);r.push(Fs,i);const a=r.join(s);for(const t of Object.keys(e))/^path$/i.test(t)&&(e[t]=a);return e};const js=Symbol("format"),Us=Symbol("preformat");let zs=!0;try{new RegExp("","y")}catch(t){zs=!1}const Gs=zs?t=>new RegExp(t,"y"):t=>new RegExp(`^(?:${t})`),Hs=zs?(t,e,s)=>(t.lastIndex=s,t.exec(e)):(t,e,s)=>t.exec(e.substr(s));function Zs(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!t.length)return'""';if(/[\n\r]/.test(t))throw new Error("Line breaks can't be quoted on Windows");const i=/["%]/.test(t);if(t=Xs(t,e||!i&&/[&()<>^|]/.test(t)),i)do{t=t.replace(/[\t "%&()<>^|]/g,"^$&")}while(s--);return t}const Xs=(t,e)=>e||/[\t "]/.test(t)?`"${t.replace(/\\+(?=$|")/g,"$&$&").replace(/"/g,'\\"')}"`:t;const Vs=1,qs=2,Ws=4,Ys=t=>null===t?0:-1!==t.depth?t.depth:t.depth=Ys(t.parent)+t.depthDelta,Ks=t=>({parent:t,depthDelta:0,depth:-1,isNative:!1}),Js="^".charCodeAt(),Qs='"'.charCodeAt(),ti="(".charCodeAt(),ei=")".charCodeAt(),si="|".charCodeAt(),ii=Gs('[^"]*'),ri=Gs("&&?|\\|\\|"),ni=Gs('(\\d*>&)|[^\\s"$&()<>^|]+|(\\s+)'),oi=(t,e)=>t.length?e||ai.test(t)?`'${t.replace(/'/g,"'\\''")}'`.replace(/^(?:'')+(?!$)/,"").replace(/\\'''/g,"\\'"):t:"''",ai=/[\t\n\r "#$&'()*;<>?\\`|~]/;function hi(){}Object.assign(hi,{for:t=>null==t?hi.default||(hi.default=hi.for(process.platform)):hi._registry.get(t)||hi._registry.get("sh"),declare(t){const e=t&&t.platform||"sh",s=hi._registry.get(e),i=Object.assign(s||new hi,t);void 0===i.emptyString&&(i.emptyString=i.quote("",!0)),s||hi._registry.set(i.platform,i)},_registry:new Map,prototype:{platform:"sh",quote:oi,metaChars:ai,hasExtraMetaChars:!1,statementSeparator:";",createContext:()=>li}});const li={at(){}};hi.declare(),hi.declare({platform:"win32",quote:(t,e,s)=>Zs(t,e,s?(s.depth||0)+(s.isArgument&&!s.isNative?1:0):0),metaChars:/[\t\n\r "%&()<>^|]/,hasExtraMetaChars:!0,statementSeparator:"&",createContext(t){const e=new this.Context;return t[Us](e),e},Context:class{constructor(){this.currentScope=Ks(null),this.scopesByObject=new Map,this.argDetectState=0,this.argSet=new Set}read(t){const e=t.length;for(let s,i=0;i<e;){for(;s=Hs(ni,t,i);)null==s[2]?null!=s[1]?this.argDetectState=0===this.argDetectState?Ws:0:this.argDetectState!==qs&&(this.argDetectState|=Vs):0!=(this.argDetectState&Vs)&&(this.argDetectState=qs&~this.argDetectState>>1),i+=s[0].length;if(i>=e)break;if(s=Hs(ri,t,i))this.seq(),i+=s[0].length;else{const e=t.charCodeAt(i);e===Js?i+=2:e===Qs?i+=Hs(ii,t,i+1)[0].length+2:(e===ti?this.enterScope():e===ei?this.exitScope():e===si?this.pipe():this.argDetectState=0===this.argDetectState?Ws:0,i++)}}}enterScope(){this.currentScope=Ks(this.currentScope),this.argDetectState=0}exitScope(){this.currentScope=this.currentScope.parent||(this.currentScope.parent=Ks(null)),this.argDetectState=qs}seq(){this.currentScope=Ks(this.currentScope.parent),this.argDetectState=0}pipe(){this.currentScope.depthDelta=1,this.argDetectState=0}mark(t){this.scopesByObject.set(t,this.currentScope),this.argDetectState===qs?this.argSet.add(t):this.argDetectState|=Vs}at(t){const e=this.scopesByObject.get(t);return{depth:Ys(e),isArgument:this.argSet.has(t),isNative:e.isNative}}}});const ci=t=>t===Object(t);class ui{constructor(t,e){this.contents=t,this.untested=e}[js](t,e){const s=this.contents,i=s.length,r=new Array(i);for(let e=0;e<i;e++){const i=s[e];r[e]=ci(i)&&js in i?i[js](t):i}for(let s=!0,n=0;n<i;n++){const i=r[n];if(null===i)s=!s;else if(s&&(t.hasExtraMetaChars||this.untested&&this.untested.has(n))&&t.metaChars.test(i))return t.quote(r.join(""),!1,e.at(this))}const n=[];for(let s=null,o=0;o<i;o++){const i=r[o];null===i?s=s?(n.push(t.quote(s.join(""),!0,e.at(this))),null):[]:(s||n).push(i)}const o=n.join("");return o.length?o:t.emptyString}[Us](t){t.mark(this)}}class pi{constructor(t){this.value=t}[js](){return this.value}[Us](t){t.read(this.value)}}const di={[js]:t=>t.statementSeparator,[Us](t){t.seq()}},fi={},mi=function(t){const e=new WeakMap;return s=>{let i=e.get(s);return void 0===i&&(i=t(s),e.set(s,i)),i}}((t=>{const e=[];let s=0,i=null,r=!1,n=[],o=0;const a=t.length-1;for(let h=0;h<=a;h++){const l=t[h],c=l.length;let u=0;h&&(s++,n.push(fi));const p=[];let d=-1,f=-1;{let t,e=0;for(;e<c;)if(o)(t=Hs(o===gi?wi:bi,l,e))&&(p.push(0,e),e+=t[0].length),e<c&&(p.push(1,e++),o=0);else{if((t=Hs(vi,l,e))&&(d<0&&(d=e),f=e,p.push(t[1]?5:4,e),e+=t[0].length),t=Hs(Si,l,e)){const s=null!=t[1];s&&d<0&&(d=e),p.push(s?3:0,e),e+=t[0].length,s&&(f=e)}const s=l.charCodeAt(e);s===yi?(d<0&&(d=e),p.push(2,e++),f=e):s!==gi&&s!==Ei||(p.push(1,e++),o=s)}}0===h&&(d=-1),h===a&&(f=c);const m=p.length;for(let t=0,o=-1;t<=m;t+=2){let a,h=-1;t===m?a=c:(h=p[t],a=p[t+1],h>=4&&a!==f&&(h=3));const y=a===d||a===f;if(a&&(y||h!==o)){let t=1===o?null:2===o?di:l.substring(u,a);o>=2?(2===o||(t=new pi(t)),n.length&&(e.push(new ui(n,null)),n=[]),o>=4?(i=t,r=4===o):e.push(t)):n.push(t),u=a}y&&(s?e.push({contents:n,placeholderCount:s,prefix:i,onlyPrefixOnce:r}):n.length&&e.push(new ui(n,null)),s=0,i=null,r=!1,n=[]),o=h}}if(o)throw new SyntaxError(`String is missing a ${String.fromCharCode(o)} character`);return e})),yi=";".charCodeAt(),gi="'".charCodeAt(),Ei='"'.charCodeAt(),wi=Gs("[^']+"),bi=Gs('[^"]+'),Si=Gs("[^\\s\"#$&'();<>\\\\`|]+|([#$&()\\\\`|]+)"),vi=Gs("(\\s*\\d*[<>]+\\s*)|\\s+");class Ri{constructor(){this.vector=new Int32Array(1)}has(t){return 0!=(this.vector[t>>>5]&1<<t)}add(t){const e=t>>>5,s=e+1;let i=this.vector,r=i.length;if(s>r){for(;s>(r*=2););const t=i;i=new Int32Array(r),i.set(t),this.vector=i}i[e]|=1<<t}}const Oi=t=>null==t?""+t:t;function _i(t){let e;switch(!0){default:if(ci(t)){if(Array.isArray(t)){e=t;break}if(Symbol.iterator in t){e=Array.from(t);break}}e=[t]}return e.map(Oi)}function Ii(t,e,s){const i=s-e;let r=1;for(let i=e;i<s;i++)r*=t[i].length;if(r>1e6)throw new RangeError("Far too many elements to interpolate");const n=new Array(r),o=new Array(i).fill(0);for(let s=0;s<r;s++){const r=n[s]=new Array(i);for(let s=0;s<i;s++)r[s]=t[s+e][o[s]];for(let s=i-1;s>=0&&!(++o[s]<t[s+e].length);s--)o[s]=0}return n}const Ti=new pi(" ");class Ai{constructor(t){this.children=t}static sh(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];return new Ai(function(t,e){e=e.map(_i);const s=[];let i=0;for(let r=0,n=t.length;r<n;r++){const n=t[r];if(js in n){s.push(n);continue}const o=n.contents,a=n.placeholderCount,h=n.prefix,l=n.onlyPrefixOnce,c=o.length,u=i+a,p=Ii(e,i,u);i=u;for(let t=0,e=p.length;t<e;t++){const e=t>0,i=p[t];(e||h)&&s.push(!e||!l&&h?h:Ti);let r=[],n=null,a=!1,u=0;for(let t=0;t<c;t++){const e=o[t];if(e===fi){const t=i[u++];a?r.push(t):ci(t)&&js in t?(r.length&&(s.push(new ui(r,n)),r=[],n=null),s.push(t)):((n||(n=new Ri)).add(r.length),r.push(t))}else r.push(e),null===e&&(a=!a)}r.length&&s.push(new ui(r,n))}}return s}(mi(t),s))}toString(t){return this[js](hi.for(t))}[js](t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.createContext(this);return this.children.map((s=>s[js](t,e))).join("")}[Us](t){const e=this.children;for(let s=0,i=e.length;s<i;s++){const i=e[s];Us in i&&i[Us](t)}}}var Li=hi,Ni=Ai,ki=ui,Di=pi,Ci=Zs,$i=oi,xi=function(t,e,s){return hi.for(s).quote(t,e)},Pi=function(){return Ai.sh.apply(Ai,arguments).toString()},Mi=di,Fi=js,Bi=Us,ji=t=>new pi(t),Ui=Object.defineProperty({Formatter:Li,ShellString:Ni,ShellStringText:ki,ShellStringUnquoted:Di,quoteForCmd:Ci,quoteForSh:$i,quoteForShell:xi,sh:Pi,shellStringSemicolon:Mi,formatSymbol:Fi,preformatSymbol:Bi,unquoted:ji},"__esModule",{value:!0});const{resolve:zi}=m.default,Gi=require.resolve("node-gyp/bin/node-gyp.js"),{quoteForShell:Hi,ShellString:Zi,ShellStringText:Xi,ShellStringUnquoted:Vi}=Ui,qi=t=>{const e=[],s=Zi.sh([t]);for(const t of s.children)if(t instanceof Xi){const s=t.contents.filter((t=>null!==t)).map((t=>Hi(t,!1,xs&&"win32")));e.push(...s)}else t instanceof Vi?e.push(t.value):e.push(xs?"&":";");return e.join("")};var Wi=t=>{const{event:e,path:s,scriptShell:i=(xs?process.env.comspec||"cmd":"sh"),env:r={},stdio:n,cmd:o,stdioString:a=!1}=t,h=/(?:^|\\)cmd(?:\.exe)?$/i.test(i);return[i,h?["/d","/s","/c",qi(o)]:["-c",o],{env:Bs(s,{...process.env,...r,npm_package_json:zi(s,"package.json"),npm_lifecycle_event:e,npm_lifecycle_script:o,npm_config_node_gyp:Gi}),stdioString:a,stdio:n,cwd:s,...h?{windowsVerbatimArguments:!0}:{}}]};const Yi=new Map,{dirname:Ki,resolve:Ji}=m.default,Qi=t=>{if(t=Ji(t),Yi.has(t))return Promise.resolve(Yi.get(t));const e=Ki(t),s=e===t?null:s=>Qi(e).then((e=>(Yi.set(t,e),e)));return(t=>new Promise(((e,s)=>b.default.lstat(t,((t,i)=>t?s(t):e(i))))))(t).then((e=>{const{uid:s,gid:i}=e;return Yi.set(t,{uid:s,gid:i}),{uid:s,gid:i}}),s)},tr=t=>{if(t=Ji(t),Yi.has(t))return Yi.get(t);const e=Ki(t);let s=!0;try{const i=b.default.lstatSync(t);s=!1;const{uid:r,gid:n}=i;return Yi.set(t,{uid:r,gid:n}),{uid:r,gid:n}}finally{if(s&&e!==t){const s=tr(e);return Yi.set(t,s),s}}},er=new Map;var sr=t=>{if(t=Ji(t),er.has(t))return Promise.resolve(er.get(t));const e=Qi(t).then((e=>(er.delete(t),e)));return er.set(t,e),e};sr.sync=tr,sr.clearCache=()=>{Yi.clear(),er.clear()};const{spawn:ir}=S.default,rr=(t="pipe",e)=>"pipe"===t||null===t||!!Array.isArray(t)&&rr(t[e],e),nr=(t,e,{stdioString:s,stdio:i})=>s?{stdout:rr(i,1)?Buffer.concat(t).toString():null,stderr:rr(i,2)?Buffer.concat(e).toString():null}:{stdout:rr(i,1)?Buffer.concat(t):null,stderr:rr(i,2)?Buffer.concat(e):null},or=(t,e,s,i)=>{let r;const n=new Promise(((n,o)=>{r=ir(t,e,s);const a=[],h=[],l=r=>o(Object.assign(r,{cmd:t,args:e,...nr(a,h,s),...i}));r.on("error",l),r.stdout&&(r.stdout.on("data",(t=>a.push(t))).on("error",l),r.stdout.on("error",(t=>l(t)))),r.stderr&&(r.stderr.on("data",(t=>h.push(t))).on("error",l),r.stderr.on("error",(t=>l(t)))),r.on("close",((r,l)=>{const c={cmd:t,args:e,code:r,signal:l,...nr(a,h,s),...i};r||l?o(Object.assign(new Error("command failed"),c)):n(c)}))}));return n.stdin=r.stdin,n.process=r,n};var ar=(t,e,s,i={})=>{const r=s.cwd||process.cwd(),n=process.getuid&&0===process.getuid(),{uid:o,gid:a}=n?sr.sync(r):{};return or(t,e,{...s,cwd:r,uid:o,gid:a},i)};const hr=t=>Array.isArray(t)?t.map((t=>hr(t))).join("\n\n"):null===t||!1===t?"":String(t),lr=(t,e,s)=>{for(const[i,r]of Object.entries(e))void 0!==r&&(r&&!Array.isArray(r)&&"object"==typeof r?lr(t,r,`${s}${i}_`):t[`${s}${i}`]=hr(r));return t};var cr=(t,e)=>lr({...t},{name:e.name,version:e.version,config:e.config,engines:e.engines,bin:e.bin},"npm_package_");const{stat:ur}=b.default.promises;var pr={isNodeGypPackage:async function(t){return await ur(`${t}/binding.gyp`).then((t=>t.isFile())).catch((()=>!1))},defaultGypInstallScript:"node-gyp rebuild"};const dr=new Set;let fr=!1;const mr=["SIGINT","SIGTERM"],yr=t=>{for(const e of dr)e.kill(t)};var gr=t=>{dr.add(t),fr||(()=>{for(const t of mr)process.on(t,yr);fr=!0})(),t.once("exit",(()=>{dr.delete(t),(()=>{if(0===dr.size){for(const t of mr)process.removeListener(t,yr);fr=!1}})()}))};const{stat:Er}=b.default.promises,{resolve:wr}=m.default;var br=async t=>{try{return(await Er(wr(t,"server.js"))).isFile()}catch(t){return!1}};const{isNodeGypPackage:Sr,defaultGypInstallScript:vr}=pr;var Rr=async t=>{const{event:e,path:s,scriptShell:i,env:r={},stdio:n="pipe",pkg:o,args:a=[],stdioString:h=!1,banner:l=!0,signalTimeout:c=500}=t,{scripts:u={},gypfile:p}=o;let d=null;if(t.cmd?d=t.cmd:o.scripts&&o.scripts[e]?d=o.scripts[e]+a.map((t=>` ${JSON.stringify(t)}`)).join(""):"install"!==e||u.install||u.preinstall||!1===p||!await Sr(s)?"start"===e&&await br(s)&&(d="node server.js"+a.map((t=>` ${JSON.stringify(t)}`)).join("")):d=vr,!d)return{code:0,signal:null};"inherit"===n&&!1!==l&&console.log(((t,e,s)=>`\n> ${t?t+" ":""}${e}\n> ${s.trim().replace(/\n/g,"\n> ")}\n`)(o._id,e,d));const f=ar(...Wi({event:e,path:s,scriptShell:i,env:cr(r,o),stdio:n,cmd:d,stdioString:h}),{event:e,script:d,pkgid:o._id,path:s});return"inherit"===n&&gr(f.process),f.stdin&&f.stdin.end(),f.catch((t=>{const{signal:e}=t;if("inherit"===n&&e)return process.kill(process.pid,e),new Promise(((e,s)=>setTimeout((()=>s(t)),c)));throw t}))};var Or=t=>{if("object"!=typeof t||!t)throw new TypeError("invalid options object provided to runScript");const{event:e,path:s,scriptShell:i,env:r={},stdio:n="pipe",args:o=[],cmd:a}=t;if(!e||"string"!=typeof e)throw new TypeError("valid event not provided to runScript");if(!s||"string"!=typeof s)throw new TypeError("valid path not provided to runScript");if(void 0!==i&&"string"!=typeof i)throw new TypeError("invalid scriptShell option provided to runScript");if("object"!=typeof r||!r)throw new TypeError("invalid env option provided to runScript");if("string"!=typeof n&&!Array.isArray(n))throw new TypeError("invalid stdio option provided to runScript");if(!Array.isArray(o)||o.some((t=>"string"!=typeof t)))throw new TypeError("invalid args option provided to runScript");if(void 0!==a&&"string"!=typeof a)throw new TypeError("invalid cmd option provided to runScript")};var _r=Object.assign((t=>{Or(t);const{pkg:e,path:s}=t;return e?Rr(t):$s(s+"/package.json").then((e=>Rr({...t,pkg:e})))}),{isServerPackage:br}),Ir=async function(t="file:.",e={}){t=ze(t);const s=await y.default.manifest(t,e);"directory"===t.type&&await _r({...e,event:"prepack",path:t.fetchSpec,stdio:"inherit",pkg:s});const i=await y.default.tarball(s._resolved,{...e,integrity:s._integrity});"directory"===t.type&&await _r({...e,event:"postpack",path:t.fetchSpec,stdio:"inherit",pkg:s,env:{npm_package_from:i.from,npm_package_resolved:i.resolved,npm_package_integrity:i.integrity}});return i};var Tr=N((function(t){const e=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);t.exports=t=>t?Object.keys(t).map((s=>[e.has(s)?e.get(s):s,t[s]])).reduce(((t,e)=>(t[e[0]]=e[1],t)),Object.create(null)):{}}));const Ar=O.default.StringDecoder,Lr=Symbol("EOF"),Nr=Symbol("maybeEmitEnd"),kr=Symbol("emittedEnd"),Dr=Symbol("emittingEnd"),Cr=Symbol("closed"),$r=Symbol("read"),xr=Symbol("flush"),Pr=Symbol("flushChunk"),Mr=Symbol("encoding"),Fr=Symbol("decoder"),Br=Symbol("flowing"),jr=Symbol("paused"),Ur=Symbol("resume"),zr=Symbol("bufferLength"),Gr=Symbol("bufferPush"),Hr=Symbol("bufferShift"),Zr=Symbol("objectMode"),Xr=Symbol("destroyed"),Vr="1"!==L._MP_NO_ITERATOR_SYMBOLS_,qr=Vr&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Wr=Vr&&Symbol.iterator||Symbol("iterator not implemented"),Yr=t=>"end"===t||"finish"===t||"prefinish"===t;var Kr=class t extends R.default{constructor(t){super(),this[Br]=!1,this[jr]=!1,this.pipes=new M,this.buffer=new M,this[Zr]=t&&t.objectMode||!1,this[Zr]?this[Mr]=null:this[Mr]=t&&t.encoding||null,"buffer"===this[Mr]&&(this[Mr]=null),this[Fr]=this[Mr]?new Ar(this[Mr]):null,this[Lr]=!1,this[kr]=!1,this[Dr]=!1,this[Cr]=!1,this.writable=!0,this.readable=!0,this[zr]=0,this[Xr]=!1}get bufferLength(){return this[zr]}get encoding(){return this[Mr]}set encoding(t){if(this[Zr])throw new Error("cannot set encoding in objectMode");if(this[Mr]&&t!==this[Mr]&&(this[Fr]&&this[Fr].lastNeed||this[zr]))throw new Error("cannot change encoding");this[Mr]!==t&&(this[Fr]=t?new Ar(t):null,this.buffer.length&&(this.buffer=this.buffer.map((t=>this[Fr].write(t))))),this[Mr]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[Zr]}set objectMode(t){this[Zr]=this[Zr]||!!t}write(t,e,s){if(this[Lr])throw new Error("write after end");return this[Xr]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):("function"==typeof e&&(s=e,e="utf8"),e||(e="utf8"),this[Zr]||Buffer.isBuffer(t)||(i=t,!Buffer.isBuffer(i)&&ArrayBuffer.isView(i)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(t=>t instanceof ArrayBuffer||"object"==typeof t&&t.constructor&&"ArrayBuffer"===t.constructor.name&&t.byteLength>=0)(t)?t=Buffer.from(t):"string"!=typeof t&&(this.objectMode=!0)),this.objectMode||t.length?("string"!=typeof t||this[Zr]||e===this[Mr]&&!this[Fr].lastNeed||(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[Mr]&&(t=this[Fr].write(t)),this.flowing?(0!==this[zr]&&this[xr](!0),this.emit("data",t)):this[Gr](t),0!==this[zr]&&this.emit("readable"),s&&s(),this.flowing):(0!==this[zr]&&this.emit("readable"),s&&s(),this.flowing));var i}read(t){if(this[Xr])return null;try{return 0===this[zr]||0===t||t>this[zr]?null:(this[Zr]&&(t=null),this.buffer.length>1&&!this[Zr]&&(this.encoding?this.buffer=new M([Array.from(this.buffer).join("")]):this.buffer=new M([Buffer.concat(Array.from(this.buffer),this[zr])])),this[$r](t||null,this.buffer.head.value))}finally{this[Nr]()}}[$r](t,e){return t===e.length||null===t?this[Hr]():(this.buffer.head.value=e.slice(t),e=e.slice(0,t),this[zr]-=t),this.emit("data",e),this.buffer.length||this[Lr]||this.emit("drain"),e}end(t,e,s){return"function"==typeof t&&(s=t,t=null),"function"==typeof e&&(s=e,e="utf8"),t&&this.write(t,e),s&&this.once("end",s),this[Lr]=!0,this.writable=!1,!this.flowing&&this[jr]||this[Nr](),this}[Ur](){this[Xr]||(this[jr]=!1,this[Br]=!0,this.emit("resume"),this.buffer.length?this[xr]():this[Lr]?this[Nr]():this.emit("drain"))}resume(){return this[Ur]()}pause(){this[Br]=!1,this[jr]=!0}get destroyed(){return this[Xr]}get flowing(){return this[Br]}get paused(){return this[jr]}[Gr](t){return this[Zr]?this[zr]+=1:this[zr]+=t.length,this.buffer.push(t)}[Hr](){return this.buffer.length&&(this[Zr]?this[zr]-=1:this[zr]-=this.buffer.head.value.length),this.buffer.shift()}[xr](t){do{}while(this[Pr](this[Hr]()));t||this.buffer.length||this[Lr]||this.emit("drain")}[Pr](t){return!!t&&(this.emit("data",t),this.flowing)}pipe(t,e){if(this[Xr])return;const s=this[kr];e=e||{},t===process.stdout||t===process.stderr?e.end=!1:e.end=!1!==e.end;const i={dest:t,opts:e,ondrain:t=>this[Ur]()};return this.pipes.push(i),t.on("drain",i.ondrain),this[Ur](),s&&i.opts.end&&i.dest.end(),t}addListener(t,e){return this.on(t,e)}on(t,e){try{return super.on(t,e)}finally{"data"!==t||this.pipes.length||this.flowing?Yr(t)&&this[kr]&&(super.emit(t),this.removeAllListeners(t)):this[Ur]()}}get emittedEnd(){return this[kr]}[Nr](){this[Dr]||this[kr]||this[Xr]||0!==this.buffer.length||!this[Lr]||(this[Dr]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Cr]&&this.emit("close"),this[Dr]=!1)}emit(t,e){if("error"!==t&&"close"!==t&&t!==Xr&&this[Xr])return;if("data"===t){if(!e)return;this.pipes.length&&this.pipes.forEach((t=>!1===t.dest.write(e)&&this.pause()))}else if("end"===t){if(!0===this[kr])return;this[kr]=!0,this.readable=!1,this[Fr]&&(e=this[Fr].end())&&(this.pipes.forEach((t=>t.dest.write(e))),super.emit("data",e)),this.pipes.forEach((t=>{t.dest.removeListener("drain",t.ondrain),t.opts.end&&t.dest.end()}))}else if("close"===t&&(this[Cr]=!0,!this[kr]&&!this[Xr]))return;const s=new Array(arguments.length);if(s[0]=t,s[1]=e,arguments.length>2)for(let t=2;t<arguments.length;t++)s[t]=arguments[t];try{return super.emit.apply(this,s)}finally{Yr(t)?this.removeAllListeners(t):this[Nr]()}}collect(){const t=[];this[Zr]||(t.dataLength=0);const e=this.promise();return this.on("data",(e=>{t.push(e),this[Zr]||(t.dataLength+=e.length)})),e.then((()=>t))}concat(){return this[Zr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then((t=>this[Zr]?Promise.reject(new Error("cannot concat in objectMode")):this[Mr]?t.join(""):Buffer.concat(t,t.dataLength)))}promise(){return new Promise(((t,e)=>{this.on(Xr,(()=>e(new Error("stream destroyed")))),this.on("end",(()=>t())),this.on("error",(t=>e(t)))}))}[qr](){return{next:()=>{const t=this.read();if(null!==t)return Promise.resolve({done:!1,value:t});if(this[Lr])return Promise.resolve({done:!0});let e=null,s=null;const i=t=>{this.removeListener("data",r),this.removeListener("end",n),s(t)},r=t=>{this.removeListener("error",i),this.removeListener("end",n),this.pause(),e({value:t,done:!!this[Lr]})},n=()=>{this.removeListener("error",i),this.removeListener("data",r),e({done:!0})},o=()=>i(new Error("stream destroyed"));return new Promise(((t,a)=>{s=a,e=t,this.once(Xr,o),this.once("error",i),this.once("end",n),this.once("data",r)}))}}}[Wr](){return{next:()=>{const t=this.read();return{value:t,done:null===t}}}}destroy(t){return this[Xr]?(t?this.emit("error",t):this.emit(Xr),this):(this[Xr]=!0,this.buffer=new M,this[zr]=0,"function"!=typeof this.close||this[Cr]||this.close(),t?this.emit("error",t):this.emit(Xr),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof R.default||e instanceof v.default&&("function"==typeof e.pipe||"function"==typeof e.write&&"function"==typeof e.end))}};const Jr=T.default.constants||{ZLIB_VERNUM:4736};var Qr=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},Jr)),tn=N((function(t,e){const s=I.default.Buffer,i=e.constants=Qr,r=s.concat,n=Symbol("_superWrite");class o extends Error{constructor(t){super("zlib: "+t.message),this.code=t.code,this.errno=t.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+t.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}}const a=Symbol("opts"),h=Symbol("flushFlag"),l=Symbol("finishFlushFlag"),c=Symbol("fullFlushFlag"),u=Symbol("handle"),p=Symbol("onError"),d=Symbol("sawError"),f=Symbol("level"),m=Symbol("strategy"),y=Symbol("ended");class g extends Kr{constructor(t,e){if(!t||"object"!=typeof t)throw new TypeError("invalid options for ZlibBase constructor");super(t),this[d]=!1,this[y]=!1,this[a]=t,this[h]=t.flush,this[l]=t.finishFlush;try{this[u]=new T.default[e](t)}catch(t){throw new o(t)}this[p]=t=>{this[d]||(this[d]=!0,this.close(),this.emit("error",t))},this[u].on("error",(t=>this[p](new o(t)))),this.once("end",(()=>this.close))}close(){this[u]&&(this[u].close(),this[u]=null,this.emit("close"))}reset(){if(!this[d])return _.default(this[u],"zlib binding closed"),this[u].reset()}flush(t){this.ended||("number"!=typeof t&&(t=this[c]),this.write(Object.assign(s.alloc(0),{[h]:t})))}end(t,e,s){return t&&this.write(t,e),this.flush(this[l]),this[y]=!0,super.end(null,null,s)}get ended(){return this[y]}write(t,e,i){if("function"==typeof e&&(i=e,e="utf8"),"string"==typeof t&&(t=s.from(t,e)),this[d])return;_.default(this[u],"zlib binding closed");const a=this[u]._handle,l=a.close;a.close=()=>{};const c=this[u].close;let f,m;this[u].close=()=>{},s.concat=t=>t;try{const e="number"==typeof t[h]?t[h]:this[h];f=this[u]._processChunk(t,e),s.concat=r}catch(t){s.concat=r,this[p](new o(t))}finally{this[u]&&(this[u]._handle=a,a.close=l,this[u].close=c,this[u].removeAllListeners("error"))}if(this[u]&&this[u].on("error",(t=>this[p](new o(t)))),f)if(Array.isArray(f)&&f.length>0){m=this[n](s.from(f[0]));for(let t=1;t<f.length;t++)m=this[n](f[t])}else m=this[n](s.from(f));return i&&i(),m}[n](t){return super.write(t)}}class E extends g{constructor(t,e){(t=t||{}).flush=t.flush||i.Z_NO_FLUSH,t.finishFlush=t.finishFlush||i.Z_FINISH,super(t,e),this[c]=i.Z_FULL_FLUSH,this[f]=t.level,this[m]=t.strategy}params(t,e){if(!this[d]){if(!this[u])throw new Error("cannot switch params when binding is closed");if(!this[u].params)throw new Error("not supported in this implementation");if(this[f]!==t||this[m]!==e){this.flush(i.Z_SYNC_FLUSH),_.default(this[u],"zlib binding closed");const s=this[u].flush;this[u].flush=(t,e)=>{this.flush(t),e()};try{this[u].params(t,e)}finally{this[u].flush=s}this[u]&&(this[f]=t,this[m]=e)}}}}const w=Symbol("_portable");class b extends g{constructor(t,e){(t=t||{}).flush=t.flush||i.BROTLI_OPERATION_PROCESS,t.finishFlush=t.finishFlush||i.BROTLI_OPERATION_FINISH,super(t,e),this[c]=i.BROTLI_OPERATION_FLUSH}}class S extends b{constructor(t){super(t,"BrotliCompress")}}class v extends b{constructor(t){super(t,"BrotliDecompress")}}e.Deflate=class extends E{constructor(t){super(t,"Deflate")}},e.Inflate=class extends E{constructor(t){super(t,"Inflate")}},e.Gzip=class extends E{constructor(t){super(t,"Gzip"),this[w]=t&&!!t.portable}[n](t){return this[w]?(this[w]=!1,t[9]=255,super[n](t)):super[n](t)}},e.Gunzip=class extends E{constructor(t){super(t,"Gunzip")}},e.DeflateRaw=class extends E{constructor(t){super(t,"DeflateRaw")}},e.InflateRaw=class extends E{constructor(t){super(t,"InflateRaw")}},e.Unzip=class extends E{constructor(t){super(t,"Unzip")}},"function"==typeof T.default.BrotliCompress?(e.BrotliCompress=S,e.BrotliDecompress=v):e.BrotliCompress=e.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}})),en=N((function(t,e){e.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]),e.code=new Map(Array.from(e.name).map((t=>[t[1],t[0]])))}));const sn=Symbol("slurp");var rn=class extends Kr{constructor(t,e,s){switch(super(),this.pause(),this.extended=e,this.globalExtended=s,this.header=t,this.startBlockSize=512*Math.ceil(t.size/512),this.blockRemain=this.startBlockSize,this.remain=t.size,this.type=t.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=t.path,this.mode=t.mode,this.mode&&(this.mode=4095&this.mode),this.uid=t.uid,this.gid=t.gid,this.uname=t.uname,this.gname=t.gname,this.size=t.size,this.mtime=t.mtime,this.atime=t.atime,this.ctime=t.ctime,this.linkpath=t.linkpath,this.uname=t.uname,this.gname=t.gname,e&&this[sn](e),s&&this[sn](s,!0)}write(t){const e=t.length;if(e>this.blockRemain)throw new Error("writing more to entry than is appropriate");const s=this.remain,i=this.blockRemain;return this.remain=Math.max(0,s-e),this.blockRemain=Math.max(0,i-e),!!this.ignore||(s>=e?super.write(t):super.write(t.slice(0,s)))}[sn](t,e){for(let s in t)null===t[s]||void 0===t[s]||e&&"path"===s||(this[s]=t[s])}},nn=N((function(t,e){e.encode=(t,e)=>{if(!Number.isSafeInteger(t))throw Error("cannot encode number outside of javascript safe integer range");return t<0?i(t,e):s(t,e),e};const s=(t,e)=>{e[0]=128;for(var s=e.length;s>1;s--)e[s-1]=255&t,t=Math.floor(t/256)},i=(t,e)=>{e[0]=255;var s=!1;t*=-1;for(var i=e.length;i>1;i--){var r=255&t;t=Math.floor(t/256),s?e[i-1]=o(r):0===r?e[i-1]=0:(s=!0,e[i-1]=a(r))}},r=(e.parse=t=>{t[t.length-1];var e,s=t[0];if(128===s)e=n(t.slice(1,t.length));else{if(255!==s)throw Error("invalid base256 encoding");e=r(t)}if(!Number.isSafeInteger(e))throw Error("parsed number outside of javascript safe integer range");return e},t=>{for(var e=t.length,s=0,i=!1,r=e-1;r>-1;r--){var n,h=t[r];i?n=o(h):0===h?n=h:(i=!0,n=a(h)),0!==n&&(s-=n*Math.pow(256,e-r-1))}return s}),n=t=>{for(var e=t.length,s=0,i=e-1;i>-1;i--){var r=t[i];0!==r&&(s+=r*Math.pow(256,e-i-1))}return s},o=t=>255&(255^t),a=t=>1+(255^t)&255}));const on=m.default.posix,an=Symbol("slurp"),hn=Symbol("type");const ln=(t,e)=>{const s=100;let i,r=t,n="";const o=on.parse(t).root||".";if(Buffer.byteLength(r)<s)i=[r,n,!1];else{n=on.dirname(r),r=on.basename(r);do{Buffer.byteLength(r)<=s&&Buffer.byteLength(n)<=e?i=[r,n,!1]:Buffer.byteLength(r)>s&&Buffer.byteLength(n)<=e?i=[r.substr(0,99),n,!0]:(r=on.join(on.basename(n),r),n=on.dirname(n))}while(n!==o&&!i);i||(i=[t.substr(0,99),"",!0])}return i},cn=(t,e,s)=>t.slice(e,e+s).toString("utf8").replace(/\0.*/,""),un=(t,e,s)=>pn(dn(t,e,s)),pn=t=>null===t?null:new Date(1e3*t),dn=(t,e,s)=>128&t[e]?nn.parse(t.slice(e,e+s)):fn(t,e,s),fn=(t,e,s)=>{return i=parseInt(t.slice(e,e+s).toString("utf8").replace(/\0.*$/,"").trim(),8),isNaN(i)?null:i;var i},mn={12:8589934591,8:2097151},yn=(t,e,s,i)=>null!==i&&(i>mn[s]||i<0?(nn.encode(i,t.slice(e,e+s)),!0):(gn(t,e,s,i),!1)),gn=(t,e,s,i)=>t.write(En(i,s),e,s,"ascii"),En=(t,e)=>wn(Math.floor(t).toString(8),e),wn=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",bn=(t,e,s,i)=>null!==i&&yn(t,e,s,i.getTime()/1e3),Sn=new Array(156).join("\0"),vn=(t,e,s,i)=>null!==i&&(t.write(i+Sn,e,s,"utf8"),i.length!==Buffer.byteLength(i)||i.length>s);var Rn=class{constructor(t,e,s,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[hn]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(t)?this.decode(t,e||0,s,i):t&&this.set(t)}decode(t,e,s,i){if(e||(e=0),!(t&&t.length>=e+512))throw new Error("need 512 bytes for header");if(this.path=cn(t,e,100),this.mode=dn(t,e+100,8),this.uid=dn(t,e+108,8),this.gid=dn(t,e+116,8),this.size=dn(t,e+124,12),this.mtime=un(t,e+136,12),this.cksum=dn(t,e+148,12),this[an](s),this[an](i,!0),this[hn]=cn(t,e+156,1),""===this[hn]&&(this[hn]="0"),"0"===this[hn]&&"/"===this.path.substr(-1)&&(this[hn]="5"),"5"===this[hn]&&(this.size=0),this.linkpath=cn(t,e+157,100),"ustar\x0000"===t.slice(e+257,e+265).toString())if(this.uname=cn(t,e+265,32),this.gname=cn(t,e+297,32),this.devmaj=dn(t,e+329,8),this.devmin=dn(t,e+337,8),0!==t[e+475]){const s=cn(t,e+345,155);this.path=s+"/"+this.path}else{const s=cn(t,e+345,130);s&&(this.path=s+"/"+this.path),this.atime=un(t,e+476,12),this.ctime=un(t,e+488,12)}let r=256;for(let s=e;s<e+148;s++)r+=t[s];for(let s=e+156;s<e+512;s++)r+=t[s];this.cksumValid=r===this.cksum,null===this.cksum&&256===r&&(this.nullBlock=!0)}[an](t,e){for(let s in t)null===t[s]||void 0===t[s]||e&&"path"===s||(this[s]=t[s])}encode(t,e){if(t||(t=this.block=Buffer.alloc(512),e=0),e||(e=0),!(t.length>=e+512))throw new Error("need 512 bytes for header");const s=this.ctime||this.atime?130:155,i=ln(this.path||"",s),r=i[0],n=i[1];this.needPax=i[2],this.needPax=vn(t,e,100,r)||this.needPax,this.needPax=yn(t,e+100,8,this.mode)||this.needPax,this.needPax=yn(t,e+108,8,this.uid)||this.needPax,this.needPax=yn(t,e+116,8,this.gid)||this.needPax,this.needPax=yn(t,e+124,12,this.size)||this.needPax,this.needPax=bn(t,e+136,12,this.mtime)||this.needPax,t[e+156]=this[hn].charCodeAt(0),this.needPax=vn(t,e+157,100,this.linkpath)||this.needPax,t.write("ustar\x0000",e+257,8),this.needPax=vn(t,e+265,32,this.uname)||this.needPax,this.needPax=vn(t,e+297,32,this.gname)||this.needPax,this.needPax=yn(t,e+329,8,this.devmaj)||this.needPax,this.needPax=yn(t,e+337,8,this.devmin)||this.needPax,this.needPax=vn(t,e+345,s,n)||this.needPax,0!==t[e+475]?this.needPax=vn(t,e+345,155,n)||this.needPax:(this.needPax=vn(t,e+345,130,n)||this.needPax,this.needPax=bn(t,e+476,12,this.atime)||this.needPax,this.needPax=bn(t,e+488,12,this.ctime)||this.needPax);let o=256;for(let s=e;s<e+148;s++)o+=t[s];for(let s=e+156;s<e+512;s++)o+=t[s];return this.cksum=o,yn(t,e+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(t){for(let e in t)null!==t[e]&&void 0!==t[e]&&(this[e]=t[e])}get type(){return en.name.get(this[hn])||this[hn]}get typeKey(){return this[hn]}set type(t){en.code.has(t)?this[hn]=en.code.get(t):this[hn]=t}};class On{constructor(t,e){this.atime=t.atime||null,this.charset=t.charset||null,this.comment=t.comment||null,this.ctime=t.ctime||null,this.gid=t.gid||null,this.gname=t.gname||null,this.linkpath=t.linkpath||null,this.mtime=t.mtime||null,this.path=t.path||null,this.size=t.size||null,this.uid=t.uid||null,this.uname=t.uname||null,this.dev=t.dev||null,this.ino=t.ino||null,this.nlink=t.nlink||null,this.global=e||!1}encode(){const t=this.encodeBody();if(""===t)return null;const e=Buffer.byteLength(t),s=512*Math.ceil(1+e/512),i=Buffer.allocUnsafe(s);for(let t=0;t<512;t++)i[t]=0;new Rn({path:("PaxHeader/"+m.default.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:e,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(t,512,e,"utf8");for(let t=e+512;t<i.length;t++)i[t]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(t){if(null===this[t]||void 0===this[t])return"";const e=" "+("dev"===t||"ino"===t||"nlink"===t?"SCHILY.":"")+t+"="+(this[t]instanceof Date?this[t].getTime()/1e3:this[t])+"\n",s=Buffer.byteLength(e);let i=Math.floor(Math.log(s)/Math.log(10))+1;s+i>=Math.pow(10,i)&&(i+=1);return i+s+e}}On.parse=(t,e,s)=>new On(_n(In(t),e),s);const _n=(t,e)=>e?Object.keys(t).reduce(((e,s)=>(e[s]=t[s],e)),e):t,In=t=>t.replace(/\n$/,"").split("\n").reduce(Tn,Object.create(null)),Tn=(t,e)=>{const s=parseInt(e,10);if(s!==Buffer.byteLength(e)+1)return t;const i=(e=e.substr((s+" ").length)).split("="),r=i.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!r)return t;const n=i.join("=");return t[r]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(r)?new Date(1e3*n):/^[0-9]+$/.test(n)?+n:n,t};var An=On,Ln=t=>class extends t{warn(t,e,s={}){this.file&&(s.file=this.file),this.cwd&&(s.cwd=this.cwd),s.code=e instanceof Error&&e.code||t,s.tarCode=t,this.strict||!1===s.recoverable?e instanceof Error?this.emit("error",Object.assign(e,s)):this.emit("error",Object.assign(new Error(`${t}: ${e}`),s)):(e instanceof Error&&(s=Object.assign(e,s),e=e.message),this.emit("warn",s.tarCode,e,s))}};const Nn=["|","<",">","?",":"],kn=Nn.map((t=>String.fromCharCode(61440+t.charCodeAt(0)))),Dn=new Map(Nn.map(((t,e)=>[t,kn[e]]))),Cn=new Map(kn.map(((t,e)=>[t,Nn[e]])));var $n=t=>Nn.reduce(((t,e)=>t.split(e).join(Dn.get(e))),t),xn=t=>kn.reduce(((t,e)=>t.split(e).join(Cn.get(e))),t),Pn=(t,e,s)=>(t&=4095,s&&(t=-19&(384|t)),e&&(256&t&&(t|=64),32&t&&(t|=8),4&t&&(t|=1)),t);const Mn=Symbol("process"),Fn=Symbol("file"),Bn=Symbol("directory"),jn=Symbol("symlink"),Un=Symbol("hardlink"),zn=Symbol("header"),Gn=Symbol("read"),Hn=Symbol("lstat"),Zn=Symbol("onlstat"),Xn=Symbol("onread"),Vn=Symbol("onreadlink"),qn=Symbol("openfile"),Wn=Symbol("onopenfile"),Yn=Symbol("close"),Kn=Symbol("mode"),Jn=Ln(class extends Kr{constructor(t,e){if(super(e=e||{}),"string"!=typeof t)throw new TypeError("path is required");this.path=t,this.portable=!!e.portable,this.myuid=process.getuid&&process.getuid(),this.myuser=process.env.USER||"",this.maxReadSize=e.maxReadSize||16777216,this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.preservePaths=!!e.preservePaths,this.cwd=e.cwd||process.cwd(),this.strict=!!e.strict,this.noPax=!!e.noPax,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,"function"==typeof e.onwarn&&this.on("warn",e.onwarn);let s=!1;if(!this.preservePaths&&m.default.win32.isAbsolute(t)){const e=m.default.win32.parse(t);this.path=t.substr(e.root.length),s=e.root}this.win32=!!e.win32||"win32"===process.platform,this.win32&&(this.path=xn(this.path.replace(/\\/g,"/")),t=t.replace(/\\/g,"/")),this.absolute=e.absolute||m.default.resolve(this.cwd,t),""===this.path&&(this.path="./"),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.statCache.has(this.absolute)?this[Zn](this.statCache.get(this.absolute)):this[Hn]()}[Hn](){b.default.lstat(this.absolute,((t,e)=>{if(t)return this.emit("error",t);this[Zn](e)}))}[Zn](t){this.statCache.set(this.absolute,t),this.stat=t,t.isFile()||(t.size=0),this.type=to(t),this.emit("stat",t),this[Mn]()}[Mn](){switch(this.type){case"File":return this[Fn]();case"Directory":return this[Bn]();case"SymbolicLink":return this[jn]();default:return this.end()}}[Kn](t){return Pn(t,"Directory"===this.type,this.portable)}[zn](){"Directory"===this.type&&this.portable&&(this.noMtime=!0),this.header=new Rn({path:this.path,linkpath:this.linkpath,mode:this[Kn](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&this.write(new An({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this.path,linkpath:this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),this.write(this.header.block)}[Bn](){"/"!==this.path.substr(-1)&&(this.path+="/"),this.stat.size=0,this[zn](),this.end()}[jn](){b.default.readlink(this.absolute,((t,e)=>{if(t)return this.emit("error",t);this[Vn](e)}))}[Vn](t){this.linkpath=t.replace(/\\/g,"/"),this[zn](),this.end()}[Un](t){this.type="Link",this.linkpath=m.default.relative(this.cwd,t).replace(/\\/g,"/"),this.stat.size=0,this[zn](),this.end()}[Fn](){if(this.stat.nlink>1){const t=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(t)){const e=this.linkCache.get(t);if(0===e.indexOf(this.cwd))return this[Un](e)}this.linkCache.set(t,this.absolute)}if(this[zn](),0===this.stat.size)return this.end();this[qn]()}[qn](){b.default.open(this.absolute,"r",((t,e)=>{if(t)return this.emit("error",t);this[Wn](e)}))}[Wn](t){const e=512*Math.ceil(this.stat.size/512),s=Math.min(e,this.maxReadSize),i=Buffer.allocUnsafe(s);this[Gn](t,i,0,i.length,0,this.stat.size,e)}[Gn](t,e,s,i,r,n,o){b.default.read(t,e,s,i,r,((a,h)=>{if(a)return this[Yn](t,(()=>this.emit("error",a)));this[Xn](t,e,s,i,r,n,o,h)}))}[Yn](t,e){b.default.close(t,e)}[Xn](t,e,s,i,r,n,o,a){if(a<=0&&n>0){const e=new Error("encountered unexpected EOF");return e.path=this.absolute,e.syscall="read",e.code="EOF",this[Yn](t,(()=>this.emit("error",e)))}if(a>n){const e=new Error("did not encounter expected EOF");return e.path=this.absolute,e.syscall="read",e.code="EOF",this[Yn](t,(()=>this.emit("error",e)))}if(a===n)for(let t=a;t<i&&a<o;t++)e[t+s]=0,a++,n++;const h=0===s&&a===e.length?e:e.slice(s,s+a);if(n-=a,o-=a,r+=a,s+=a,this.write(h),!n)return o&&this.write(Buffer.alloc(o)),this[Yn](t,(t=>t?this.emit("error",t):this.end()));s>=i&&(e=Buffer.allocUnsafe(i),s=0),i=e.length-s,this[Gn](t,e,s,i,r,n,o)}});const Qn=Ln(class extends Kr{constructor(t,e){super(e=e||{}),this.preservePaths=!!e.preservePaths,this.portable=!!e.portable,this.strict=!!e.strict,this.noPax=!!e.noPax,this.noMtime=!!e.noMtime,this.readEntry=t,this.type=t.type,"Directory"===this.type&&this.portable&&(this.noMtime=!0),this.path=t.path,this.mode=this[Kn](t.mode),this.uid=this.portable?null:t.uid,this.gid=this.portable?null:t.gid,this.uname=this.portable?null:t.uname,this.gname=this.portable?null:t.gname,this.size=t.size,this.mtime=this.noMtime?null:e.mtime||t.mtime,this.atime=this.portable?null:t.atime,this.ctime=this.portable?null:t.ctime,this.linkpath=t.linkpath,"function"==typeof e.onwarn&&this.on("warn",e.onwarn);let s=!1;if(m.default.isAbsolute(this.path)&&!this.preservePaths){const t=m.default.parse(this.path);s=t.root,this.path=this.path.substr(t.root.length)}this.remain=t.size,this.blockRemain=t.startBlockSize,this.header=new Rn({path:this.path,linkpath:this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.header.encode()&&!this.noPax&&super.write(new An({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this.path,linkpath:this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),t.pipe(this)}[Kn](t){return Pn(t,"Directory"===this.type,this.portable)}write(t){const e=t.length;if(e>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=e,super.write(t)}end(){return this.blockRemain&&this.write(Buffer.alloc(this.blockRemain)),super.end()}});Jn.Sync=class extends Jn{constructor(t,e){super(t,e)}[Hn](){this[Zn](b.default.lstatSync(this.absolute))}[jn](){this[Vn](b.default.readlinkSync(this.absolute))}[qn](){this[Wn](b.default.openSync(this.absolute,"r"))}[Gn](t,e,s,i,r,n,o){let a=!0;try{const h=b.default.readSync(t,e,s,i,r);this[Xn](t,e,s,i,r,n,o,h),a=!1}finally{if(a)try{this[Yn](t,(()=>{}))}catch(t){}}}[Yn](t,e){b.default.closeSync(t),e()}},Jn.Tar=Qn;const to=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";var eo=Jn;class so{constructor(t,e){this.path=t||"./",this.absolute=e,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}}const io=eo.Sync,ro=eo.Tar,no=Buffer.alloc(1024),oo=Symbol("onStat"),ao=Symbol("ended"),ho=Symbol("queue"),lo=Symbol("current"),co=Symbol("process"),uo=Symbol("processing"),po=Symbol("processJob"),fo=Symbol("jobs"),mo=Symbol("jobDone"),yo=Symbol("addFSEntry"),go=Symbol("addTarEntry"),Eo=Symbol("stat"),wo=Symbol("readdir"),bo=Symbol("onreaddir"),So=Symbol("pipe"),vo=Symbol("entry"),Ro=Symbol("entryOpt"),Oo=Symbol("writeEntryClass"),_o=Symbol("write"),Io=Symbol("ondrain"),To=Ln(class extends Kr{constructor(t){super(t),t=t||Object.create(null),this.opt=t,this.file=t.file||"",this.cwd=t.cwd||process.cwd(),this.maxReadSize=t.maxReadSize,this.preservePaths=!!t.preservePaths,this.strict=!!t.strict,this.noPax=!!t.noPax,this.prefix=(t.prefix||"").replace(/(\\|\/)+$/,""),this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.readdirCache=t.readdirCache||new Map,this[Oo]=eo,"function"==typeof t.onwarn&&this.on("warn",t.onwarn),this.portable=!!t.portable,this.zip=null,t.gzip?("object"!=typeof t.gzip&&(t.gzip={}),this.portable&&(t.gzip.portable=!0),this.zip=new tn.Gzip(t.gzip),this.zip.on("data",(t=>super.write(t))),this.zip.on("end",(t=>super.end())),this.zip.on("drain",(t=>this[Io]())),this.on("resume",(t=>this.zip.resume()))):this.on("drain",this[Io]),this.noDirRecurse=!!t.noDirRecurse,this.follow=!!t.follow,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.filter="function"==typeof t.filter?t.filter:t=>!0,this[ho]=new M,this[fo]=0,this.jobs=+t.jobs||4,this[uo]=!1,this[ao]=!1}[_o](t){return super.write(t)}add(t){return this.write(t),this}end(t){return t&&this.write(t),this[ao]=!0,this[co](),this}write(t){if(this[ao])throw new Error("write after end");return t instanceof rn?this[go](t):this[yo](t),this.flowing}[go](t){const e=m.default.resolve(this.cwd,t.path);if(this.prefix&&(t.path=this.prefix+"/"+t.path.replace(/^\.(\/+|$)/,"")),this.filter(t.path,t)){const s=new so(t.path,e,!1);s.entry=new ro(t,this[Ro](s)),s.entry.on("end",(t=>this[mo](s))),this[fo]+=1,this[ho].push(s)}else t.resume();this[co]()}[yo](t){const e=m.default.resolve(this.cwd,t);this.prefix&&(t=this.prefix+"/"+t.replace(/^\.(\/+|$)/,"")),this[ho].push(new so(t,e)),this[co]()}[Eo](t){t.pending=!0,this[fo]+=1;const e=this.follow?"stat":"lstat";b.default[e](t.absolute,((e,s)=>{t.pending=!1,this[fo]-=1,e?this.emit("error",e):this[oo](t,s)}))}[oo](t,e){this.statCache.set(t.absolute,e),t.stat=e,this.filter(t.path,e)||(t.ignore=!0),this[co]()}[wo](t){t.pending=!0,this[fo]+=1,b.default.readdir(t.absolute,((e,s)=>{if(t.pending=!1,this[fo]-=1,e)return this.emit("error",e);this[bo](t,s)}))}[bo](t,e){this.readdirCache.set(t.absolute,e),t.readdir=e,this[co]()}[co](){if(!this[uo]){this[uo]=!0;for(let t=this[ho].head;null!==t&&this[fo]<this.jobs;t=t.next)if(this[po](t.value),t.value.ignore){const e=t.next;this[ho].removeNode(t),t.next=e}this[uo]=!1,this[ao]&&!this[ho].length&&0===this[fo]&&(this.zip?this.zip.end(no):(super.write(no),super.end()))}}get[lo](){return this[ho]&&this[ho].head&&this[ho].head.value}[mo](t){this[ho].shift(),this[fo]-=1,this[co]()}[po](t){t.pending||(t.entry?t!==this[lo]||t.piped||this[So](t):(t.stat||(this.statCache.has(t.absolute)?this[oo](t,this.statCache.get(t.absolute)):this[Eo](t)),t.stat&&(t.ignore||(this.noDirRecurse||!t.stat.isDirectory()||t.readdir||(this.readdirCache.has(t.absolute)?this[bo](t,this.readdirCache.get(t.absolute)):this[wo](t),t.readdir))&&(t.entry=this[vo](t),t.entry?t!==this[lo]||t.piped||this[So](t):t.ignore=!0))))}[Ro](t){return{onwarn:(t,e,s)=>this.warn(t,e,s),noPax:this.noPax,cwd:this.cwd,absolute:t.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime}}[vo](t){this[fo]+=1;try{return new this[Oo](t.path,this[Ro](t)).on("end",(()=>this[mo](t))).on("error",(t=>this.emit("error",t)))}catch(t){this.emit("error",t)}}[Io](){this[lo]&&this[lo].entry&&this[lo].entry.resume()}[So](t){t.piped=!0,t.readdir&&t.readdir.forEach((e=>{const s=this.prefix?t.path.slice(this.prefix.length+1)||"./":t.path,i="./"===s?"":s.replace(/\/*$/,"/");this[yo](i+e)}));const e=t.entry,s=this.zip;s?e.on("data",(t=>{s.write(t)||e.pause()})):e.on("data",(t=>{super.write(t)||e.pause()}))}pause(){return this.zip&&this.zip.pause(),super.pause()}});To.Sync=class extends To{constructor(t){super(t),this[Oo]=io}pause(){}resume(){}[Eo](t){const e=this.follow?"statSync":"lstatSync";this[oo](t,b.default[e](t.absolute))}[wo](t,e){this[bo](t,b.default.readdirSync(t.absolute))}[So](t){const e=t.entry,s=this.zip;t.readdir&&t.readdir.forEach((e=>{const s=this.prefix?t.path.slice(this.prefix.length+1)||"./":t.path,i="./"===s?"":s.replace(/\/*$/,"/");this[yo](i+e)})),s?e.on("data",(t=>{s.write(t)})):e.on("data",(t=>{super[_o](t)}))}};var Ao=To;const Lo=v.default.EventEmitter;let No=b.default.writev;if(!No){const t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;No=(s,i,r,n)=>{const o=new e;o.oncomplete=(t,e)=>n(t,e,i),t.writeBuffers(s,i,r,o)}}const ko=Symbol("_autoClose"),Do=Symbol("_close"),Co=Symbol("_ended"),$o=Symbol("_fd"),xo=Symbol("_finished"),Po=Symbol("_flags"),Mo=Symbol("_flush"),Fo=Symbol("_handleChunk"),Bo=Symbol("_makeBuf"),jo=Symbol("_mode"),Uo=Symbol("_needDrain"),zo=Symbol("_onerror"),Go=Symbol("_onopen"),Ho=Symbol("_onread"),Zo=Symbol("_onwrite"),Xo=Symbol("_open"),Vo=Symbol("_path"),qo=Symbol("_pos"),Wo=Symbol("_queue"),Yo=Symbol("_read"),Ko=Symbol("_readSize"),Jo=Symbol("_reading"),Qo=Symbol("_remain"),ta=Symbol("_size"),ea=Symbol("_write"),sa=Symbol("_writing"),ia=Symbol("_defaultFlag"),ra=Symbol("_errored");class na extends Kr{constructor(t,e){if(super(e=e||{}),this.readable=!0,this.writable=!1,"string"!=typeof t)throw new TypeError("path must be a string");this[ra]=!1,this[$o]="number"==typeof e.fd?e.fd:null,this[Vo]=t,this[Ko]=e.readSize||16777216,this[Jo]=!1,this[ta]="number"==typeof e.size?e.size:1/0,this[Qo]=this[ta],this[ko]="boolean"!=typeof e.autoClose||e.autoClose,"number"==typeof this[$o]?this[Yo]():this[Xo]()}get fd(){return this[$o]}get path(){return this[Vo]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Xo](){b.default.open(this[Vo],"r",((t,e)=>this[Go](t,e)))}[Go](t,e){t?this[zo](t):(this[$o]=e,this.emit("open",e),this[Yo]())}[Bo](){return Buffer.allocUnsafe(Math.min(this[Ko],this[Qo]))}[Yo](){if(!this[Jo]){this[Jo]=!0;const t=this[Bo]();if(0===t.length)return process.nextTick((()=>this[Ho](null,0,t)));b.default.read(this[$o],t,0,t.length,null,((t,e,s)=>this[Ho](t,e,s)))}}[Ho](t,e,s){this[Jo]=!1,t?this[zo](t):this[Fo](e,s)&&this[Yo]()}[Do](){if(this[ko]&&"number"==typeof this[$o]){const t=this[$o];this[$o]=null,b.default.close(t,(t=>t?this.emit("error",t):this.emit("close")))}}[zo](t){this[Jo]=!0,this[Do](),this.emit("error",t)}[Fo](t,e){let s=!1;return this[Qo]-=t,t>0&&(s=super.write(t<e.length?e.slice(0,t):e)),(0===t||this[Qo]<=0)&&(s=!1,this[Do](),super.end()),s}emit(t,e){switch(t){case"prefinish":case"finish":break;case"drain":"number"==typeof this[$o]&&this[Yo]();break;case"error":if(this[ra])return;return this[ra]=!0,super.emit(t,e);default:return super.emit(t,e)}}}class oa extends Lo{constructor(t,e){super(e=e||{}),this.readable=!1,this.writable=!0,this[ra]=!1,this[sa]=!1,this[Co]=!1,this[Uo]=!1,this[Wo]=[],this[Vo]=t,this[$o]="number"==typeof e.fd?e.fd:null,this[jo]=void 0===e.mode?438:e.mode,this[qo]="number"==typeof e.start?e.start:null,this[ko]="boolean"!=typeof e.autoClose||e.autoClose;const s=null!==this[qo]?"r+":"w";this[ia]=void 0===e.flags,this[Po]=this[ia]?s:e.flags,null===this[$o]&&this[Xo]()}emit(t,e){if("error"===t){if(this[ra])return;this[ra]=!0}return super.emit(t,e)}get fd(){return this[$o]}get path(){return this[Vo]}[zo](t){this[Do](),this[sa]=!0,this.emit("error",t)}[Xo](){b.default.open(this[Vo],this[Po],this[jo],((t,e)=>this[Go](t,e)))}[Go](t,e){this[ia]&&"r+"===this[Po]&&t&&"ENOENT"===t.code?(this[Po]="w",this[Xo]()):t?this[zo](t):(this[$o]=e,this.emit("open",e),this[Mo]())}end(t,e){return t&&this.write(t,e),this[Co]=!0,this[sa]||this[Wo].length||"number"!=typeof this[$o]||this[Zo](null,0),this}write(t,e){return"string"==typeof t&&(t=Buffer.from(t,e)),this[Co]?(this.emit("error",new Error("write() after end()")),!1):null===this[$o]||this[sa]||this[Wo].length?(this[Wo].push(t),this[Uo]=!0,!1):(this[sa]=!0,this[ea](t),!0)}[ea](t){b.default.write(this[$o],t,0,t.length,this[qo],((t,e)=>this[Zo](t,e)))}[Zo](t,e){t?this[zo](t):(null!==this[qo]&&(this[qo]+=e),this[Wo].length?this[Mo]():(this[sa]=!1,this[Co]&&!this[xo]?(this[xo]=!0,this[Do](),this.emit("finish")):this[Uo]&&(this[Uo]=!1,this.emit("drain"))))}[Mo](){if(0===this[Wo].length)this[Co]&&this[Zo](null,0);else if(1===this[Wo].length)this[ea](this[Wo].pop());else{const t=this[Wo];this[Wo]=[],No(this[$o],t,this[qo],((t,e)=>this[Zo](t,e)))}}[Do](){if(this[ko]&&"number"==typeof this[$o]){const t=this[$o];this[$o]=null,b.default.close(t,(t=>t?this.emit("error",t):this.emit("close")))}}}var aa={ReadStream:na,ReadStreamSync:class extends na{[Xo](){let t=!0;try{this[Go](null,b.default.openSync(this[Vo],"r")),t=!1}finally{t&&this[Do]()}}[Yo](){let t=!0;try{if(!this[Jo]){for(this[Jo]=!0;;){const t=this[Bo](),e=0===t.length?0:b.default.readSync(this[$o],t,0,t.length,null);if(!this[Fo](e,t))break}this[Jo]=!1}t=!1}finally{t&&this[Do]()}}[Do](){if(this[ko]&&"number"==typeof this[$o]){const t=this[$o];this[$o]=null,b.default.closeSync(t),this.emit("close")}}},WriteStream:oa,WriteStreamSync:class extends oa{[Xo](){let t;if(this[ia]&&"r+"===this[Po])try{t=b.default.openSync(this[Vo],this[Po],this[jo])}catch(t){if("ENOENT"===t.code)return this[Po]="w",this[Xo]();throw t}else t=b.default.openSync(this[Vo],this[Po],this[jo]);this[Go](null,t)}[Do](){if(this[ko]&&"number"==typeof this[$o]){const t=this[$o];this[$o]=null,b.default.closeSync(t),this.emit("close")}}[ea](t){let e=!0;try{this[Zo](null,b.default.writeSync(this[$o],t,0,t.length,this[qo])),e=!1}finally{if(e)try{this[Do]()}catch(t){}}}}};const ha=Buffer.from([31,139]),la=Symbol("state"),ca=Symbol("writeEntry"),ua=Symbol("readEntry"),pa=Symbol("nextEntry"),da=Symbol("processEntry"),fa=Symbol("extendedHeader"),ma=Symbol("globalExtendedHeader"),ya=Symbol("meta"),ga=Symbol("emitMeta"),Ea=Symbol("buffer"),wa=Symbol("queue"),ba=Symbol("ended"),Sa=Symbol("emittedEnd"),va=Symbol("emit"),Ra=Symbol("unzip"),Oa=Symbol("consumeChunk"),_a=Symbol("consumeChunkSub"),Ia=Symbol("consumeBody"),Ta=Symbol("consumeMeta"),Aa=Symbol("consumeHeader"),La=Symbol("consuming"),Na=Symbol("bufferConcat"),ka=Symbol("maybeEnd"),Da=Symbol("writing"),Ca=Symbol("aborted"),$a=Symbol("onDone"),xa=Symbol("sawValidEntry"),Pa=Symbol("sawNullBlock"),Ma=Symbol("sawEOF"),Fa=t=>!0;var Ba=Ln(class extends v.default{constructor(t){super(t=t||{}),this.file=t.file||"",this[xa]=null,this.on($a,(t=>{"begin"!==this[la]&&!1!==this[xa]||this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")})),t.ondone?this.on($a,t.ondone):this.on($a,(t=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")})),this.strict=!!t.strict,this.maxMetaEntrySize=t.maxMetaEntrySize||1048576,this.filter="function"==typeof t.filter?t.filter:Fa,this.writable=!0,this.readable=!1,this[wa]=new M,this[Ea]=null,this[ua]=null,this[ca]=null,this[la]="begin",this[ya]="",this[fa]=null,this[ma]=null,this[ba]=!1,this[Ra]=null,this[Ca]=!1,this[Pa]=!1,this[Ma]=!1,"function"==typeof t.onwarn&&this.on("warn",t.onwarn),"function"==typeof t.onentry&&this.on("entry",t.onentry)}[Aa](t,e){let s;null===this[xa]&&(this[xa]=!1);try{s=new Rn(t,e,this[fa],this[ma])}catch(t){return this.warn("TAR_ENTRY_INVALID",t)}if(s.nullBlock)this[Pa]?(this[Ma]=!0,"begin"===this[la]&&(this[la]="header"),this[va]("eof")):(this[Pa]=!0,this[va]("nullBlock"));else if(this[Pa]=!1,s.cksumValid)if(s.path){const t=s.type;if(/^(Symbolic)?Link$/.test(t)&&!s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:s});else if(!/^(Symbolic)?Link$/.test(t)&&s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:s});else{const t=this[ca]=new rn(s,this[fa],this[ma]);if(!this[xa])if(t.remain){const e=()=>{t.invalid||(this[xa]=!0)};t.on("end",e)}else this[xa]=!0;t.meta?t.size>this.maxMetaEntrySize?(t.ignore=!0,this[va]("ignoredEntry",t),this[la]="ignore",t.resume()):t.size>0&&(this[ya]="",t.on("data",(t=>this[ya]+=t)),this[la]="meta"):(this[fa]=null,t.ignore=t.ignore||!this.filter(t.path,t),t.ignore?(this[va]("ignoredEntry",t),this[la]=t.remain?"ignore":"header",t.resume()):(t.remain?this[la]="body":(this[la]="header",t.end()),this[ua]?this[wa].push(t):(this[wa].push(t),this[pa]())))}}else this.warn("TAR_ENTRY_INVALID","path is required",{header:s});else this.warn("TAR_ENTRY_INVALID","checksum failure",{header:s})}[da](t){let e=!0;return t?Array.isArray(t)?this.emit.apply(this,t):(this[ua]=t,this.emit("entry",t),t.emittedEnd||(t.on("end",(t=>this[pa]())),e=!1)):(this[ua]=null,e=!1),e}[pa](){do{}while(this[da](this[wa].shift()));if(!this[wa].length){const t=this[ua];!t||t.flowing||t.size===t.remain?this[Da]||this.emit("drain"):t.once("drain",(t=>this.emit("drain")))}}[Ia](t,e){const s=this[ca],i=s.blockRemain,r=i>=t.length&&0===e?t:t.slice(e,e+i);return s.write(r),s.blockRemain||(this[la]="header",this[ca]=null,s.end()),r.length}[Ta](t,e){const s=this[ca],i=this[Ia](t,e);return this[ca]||this[ga](s),i}[va](t,e,s){this[wa].length||this[ua]?this[wa].push([t,e,s]):this.emit(t,e,s)}[ga](t){switch(this[va]("meta",this[ya]),t.type){case"ExtendedHeader":case"OldExtendedHeader":this[fa]=An.parse(this[ya],this[fa],!1);break;case"GlobalExtendedHeader":this[ma]=An.parse(this[ya],this[ma],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[fa]=this[fa]||Object.create(null),this[fa].path=this[ya].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[fa]=this[fa]||Object.create(null),this[fa].linkpath=this[ya].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+t.type)}}abort(t){this[Ca]=!0,this.emit("abort",t),this.warn("TAR_ABORT",t,{recoverable:!1})}write(t){if(this[Ca])return;if(null===this[Ra]&&t){if(this[Ea]&&(t=Buffer.concat([this[Ea],t]),this[Ea]=null),t.length<ha.length)return this[Ea]=t,!0;for(let e=0;null===this[Ra]&&e<ha.length;e++)t[e]!==ha[e]&&(this[Ra]=!1);if(null===this[Ra]){const e=this[ba];this[ba]=!1,this[Ra]=new tn.Unzip,this[Ra].on("data",(t=>this[Oa](t))),this[Ra].on("error",(t=>this.abort(t))),this[Ra].on("end",(t=>{this[ba]=!0,this[Oa]()})),this[Da]=!0;const s=this[Ra][e?"end":"write"](t);return this[Da]=!1,s}}this[Da]=!0,this[Ra]?this[Ra].write(t):this[Oa](t),this[Da]=!1;const e=!this[wa].length&&(!this[ua]||this[ua].flowing);return e||this[wa].length||this[ua].once("drain",(t=>this.emit("drain"))),e}[Na](t){t&&!this[Ca]&&(this[Ea]=this[Ea]?Buffer.concat([this[Ea],t]):t)}[ka](){if(this[ba]&&!this[Sa]&&!this[Ca]&&!this[La]){this[Sa]=!0;const t=this[ca];if(t&&t.blockRemain){const e=this[Ea]?this[Ea].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${t.blockRemain} more bytes, only ${e} available)`,{entry:t}),this[Ea]&&t.write(this[Ea]),t.end()}this[va]($a)}}[Oa](t){if(this[La])this[Na](t);else if(t||this[Ea]){if(this[La]=!0,this[Ea]){this[Na](t);const e=this[Ea];this[Ea]=null,this[_a](e)}else this[_a](t);for(;this[Ea]&&this[Ea].length>=512&&!this[Ca]&&!this[Ma];){const t=this[Ea];this[Ea]=null,this[_a](t)}this[La]=!1}else this[ka]();this[Ea]&&!this[ba]||this[ka]()}[_a](t){let e=0,s=t.length;for(;e+512<=s&&!this[Ca]&&!this[Ma];)switch(this[la]){case"begin":case"header":this[Aa](t,e),e+=512;break;case"ignore":case"body":e+=this[Ia](t,e);break;case"meta":e+=this[Ta](t,e);break;default:throw new Error("invalid state: "+this[la])}e<s&&(this[Ea]?this[Ea]=Buffer.concat([t.slice(e),this[Ea]]):this[Ea]=t.slice(e))}end(t){this[Ca]||(this[Ra]?this[Ra].end(t):(this[ba]=!0,this.write(t)))}}),ja=N((function(t){t.exports=(t,o,a)=>{"function"==typeof t?(a=t,o=null,t={}):Array.isArray(t)&&(o=t,t={}),"function"==typeof o&&(a=o,o=null),o=o?Array.from(o):[];const h=Tr(t);if(h.sync&&"function"==typeof a)throw new TypeError("callback not supported for sync tar functions");if(!h.file&&"function"==typeof a)throw new TypeError("callback only supported with file option");return o.length&&s(h,o),h.noResume||e(h),h.file&&h.sync?i(h):h.file?r(h,a):n(h)};const e=t=>{const e=t.onentry;t.onentry=e?t=>{e(t),t.resume()}:t=>t.resume()},s=(t,e)=>{const s=new Map(e.map((t=>[t.replace(/\/+$/,""),!0]))),i=t.filter,r=(t,e)=>{const i=e||m.default.parse(t).root||".",n=t!==i&&(s.has(t)?s.get(t):r(m.default.dirname(t),i));return s.set(t,n),n};t.filter=i?(t,e)=>i(t,e)&&r(t.replace(/\/+$/,"")):t=>r(t.replace(/\/+$/,""))},i=t=>{const e=n(t),s=t.file;let i,r=!0;try{const n=b.default.statSync(s),o=t.maxReadSize||16777216;if(n.size<o)e.end(b.default.readFileSync(s));else{let t=0;const r=Buffer.allocUnsafe(o);for(i=b.default.openSync(s,"r");t<n.size;){let s=b.default.readSync(i,r,0,o,t);t+=s,e.write(r.slice(0,s))}e.end()}r=!1}finally{if(r&&i)try{b.default.closeSync(i)}catch(t){}}},r=(t,e)=>{const s=new Ba(t),i=t.maxReadSize||16777216,r=t.file,n=new Promise(((t,e)=>{s.on("error",e),s.on("end",t),b.default.stat(r,((t,n)=>{if(t)e(t);else{const t=new aa.ReadStream(r,{readSize:i,size:n.size});t.on("error",e),t.pipe(s)}}))}));return e?n.then(e,e):n},n=t=>new Ba(t)})),Ua=N((function(t){t.exports=(t,i,r)=>{if("function"==typeof i&&(r=i),Array.isArray(t)&&(i=t,t={}),!i||!Array.isArray(i)||!i.length)throw new TypeError("no files or directories specified");i=Array.from(i);const a=Tr(t);if(a.sync&&"function"==typeof r)throw new TypeError("callback not supported for sync tar functions");if(!a.file&&"function"==typeof r)throw new TypeError("callback only supported with file option");return a.file&&a.sync?e(a,i):a.file?s(a,i,r):a.sync?n(a,i):o(a,i)};const e=(t,e)=>{const s=new Ao.Sync(t),r=new aa.WriteStreamSync(t.file,{mode:t.mode||438});s.pipe(r),i(s,e)},s=(t,e,s)=>{const i=new Ao(t),n=new aa.WriteStream(t.file,{mode:t.mode||438});i.pipe(n);const o=new Promise(((t,e)=>{n.on("error",e),n.on("close",t),i.on("error",e)}));return r(i,e),s?o.then(s,s):o},i=(t,e)=>{e.forEach((e=>{"@"===e.charAt(0)?ja({file:m.default.resolve(t.cwd,e.substr(1)),sync:!0,noResume:!0,onentry:e=>t.add(e)}):t.add(e)})),t.end()},r=(t,e)=>{for(;e.length;){const s=e.shift();if("@"===s.charAt(0))return ja({file:m.default.resolve(t.cwd,s.substr(1)),noResume:!0,onentry:e=>t.add(e)}).then((s=>r(t,e)));t.add(s)}t.end()},n=(t,e)=>{const s=new Ao.Sync(t);return i(s,e),s},o=(t,e)=>{const s=new Ao(t);return r(s,e),s}})),za=N((function(t){t.exports=(t,s,r)=>{const n=Tr(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!s||!Array.isArray(s)||!s.length)throw new TypeError("no files or directories specified");return s=Array.from(s),n.sync?e(n,s):i(n,s,r)};const e=(t,e)=>{const i=new Ao.Sync(t);let r,n,o=!0;try{try{r=b.default.openSync(t.file,"r+")}catch(e){if("ENOENT"!==e.code)throw e;r=b.default.openSync(t.file,"w+")}const a=b.default.fstatSync(r),h=Buffer.alloc(512);t:for(n=0;n<a.size;n+=512){for(let t=0,e=0;t<512;t+=e){if(e=b.default.readSync(r,h,t,h.length-t,n+t),0===n&&31===h[0]&&139===h[1])throw new Error("cannot append to compressed archives");if(!e)break t}let e=new Rn(h);if(!e.cksumValid)break;let s=512*Math.ceil(e.size/512);if(n+s+512>a.size)break;n+=s,t.mtimeCache&&t.mtimeCache.set(e.path,e.mtime)}o=!1,s(t,i,n,r,e)}finally{if(o)try{b.default.closeSync(r)}catch(t){}}},s=(t,e,s,i,n)=>{const o=new aa.WriteStreamSync(t.file,{fd:i,start:s});e.pipe(o),r(e,n)},i=(t,e,s)=>{e=Array.from(e);const i=new Ao(t),r=new Promise(((s,r)=>{i.on("error",r);let o="r+";const a=(h,l)=>h&&"ENOENT"===h.code&&"r+"===o?(o="w+",b.default.open(t.file,o,a)):h?r(h):void b.default.fstat(l,((o,a)=>{if(o)return r(o);((e,s,i)=>{const r=(t,s)=>{t?b.default.close(e,(e=>i(t))):i(null,s)};let n=0;if(0===s)return r(null,0);let o=0;const a=Buffer.alloc(512),h=(i,l)=>{if(i)return r(i);if(o+=l,o<512&&l)return b.default.read(e,a,o,a.length-o,n+o,h);if(0===n&&31===a[0]&&139===a[1])return r(new Error("cannot append to compressed archives"));if(o<512)return r(null,n);const c=new Rn(a);if(!c.cksumValid)return r(null,n);const u=512*Math.ceil(c.size/512);return n+u+512>s?r(null,n):(n+=u+512,n>=s?r(null,n):(t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime),o=0,void b.default.read(e,a,0,512,n,h)))};b.default.read(e,a,0,512,n,h)})(l,a.size,((o,a)=>{if(o)return r(o);const h=new aa.WriteStream(t.file,{fd:l,start:a});i.pipe(h),h.on("error",r),h.on("close",s),n(i,e)}))}));b.default.open(t.file,o,a)}));return s?r.then(s,s):r},r=(t,e)=>{e.forEach((e=>{"@"===e.charAt(0)?ja({file:m.default.resolve(t.cwd,e.substr(1)),sync:!0,noResume:!0,onentry:e=>t.add(e)}):t.add(e)})),t.end()},n=(t,e)=>{for(;e.length;){const s=e.shift();if("@"===s.charAt(0))return ja({file:m.default.resolve(t.cwd,s.substr(1)),noResume:!0,onentry:e=>t.add(e)}).then((s=>n(t,e)));t.add(s)}t.end()}})),Ga=N((function(t){t.exports=(t,s,i)=>{const r=Tr(t);if(!r.file)throw new TypeError("file is required");if(r.gzip)throw new TypeError("cannot append to compressed archives");if(!s||!Array.isArray(s)||!s.length)throw new TypeError("no files or directories specified");return s=Array.from(s),e(r),za(r,s,i)};const e=t=>{const e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(s,i)=>e(s,i)&&!(t.mtimeCache.get(s)>i.mtime):(e,s)=>!(t.mtimeCache.get(e)>s.mtime)}}));const{promisify:Ha}=w.default;var Za=t=>{if(t)if("object"==typeof t)t={mode:511,fs:b.default,...t};else if("number"==typeof t)t={mode:t,fs:b.default};else{if("string"!=typeof t)throw new TypeError("invalid options argument");t={mode:parseInt(t,8),fs:b.default}}else t={mode:511,fs:b.default};return t.mkdir=t.mkdir||t.fs.mkdir||b.default.mkdir,t.mkdirAsync=Ha(t.mkdir),t.stat=t.stat||t.fs.stat||b.default.stat,t.statAsync=Ha(t.stat),t.statSync=t.statSync||t.fs.statSync||b.default.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||b.default.mkdirSync,t};const Xa=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:Va,parse:qa}=m.default;var Wa=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=Va(t),"win32"===Xa){const e=/[*|"<>?:]/,{root:s}=qa(t);if(e.test(t.substr(s.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};const{dirname:Ya}=m.default,Ka=(t,e,s)=>s===e?Promise.resolve():t.statAsync(e).then((t=>t.isDirectory()?s:void 0),(s=>"ENOENT"===s.code?Ka(t,Ya(e),e):void 0)),Ja=(t,e,s)=>{if(s!==e)try{return t.statSync(e).isDirectory()?s:void 0}catch(s){return"ENOENT"===s.code?Ja(t,Ya(e),e):void 0}};var Qa={findMade:Ka,findMadeSync:Ja};const{dirname:th}=m.default,eh=(t,e,s)=>{e.recursive=!1;const i=th(t);return i===t?e.mkdirAsync(t,e).catch((t=>{if("EISDIR"!==t.code)throw t})):e.mkdirAsync(t,e).then((()=>s||t),(r=>{if("ENOENT"===r.code)return eh(i,e).then((s=>eh(t,e,s)));if("EEXIST"!==r.code&&"EROFS"!==r.code)throw r;return e.statAsync(t).then((t=>{if(t.isDirectory())return s;throw r}),(()=>{throw r}))}))},sh=(t,e,s)=>{const i=th(t);if(e.recursive=!1,i===t)try{return e.mkdirSync(t,e)}catch(t){if("EISDIR"!==t.code)throw t;return}try{return e.mkdirSync(t,e),s||t}catch(r){if("ENOENT"===r.code)return sh(t,e,sh(i,e,s));if("EEXIST"!==r.code&&"EROFS"!==r.code)throw r;try{if(!e.statSync(t).isDirectory())throw r}catch(t){throw r}}};var ih={mkdirpManual:eh,mkdirpManualSync:sh};const{dirname:rh}=m.default,{findMade:nh,findMadeSync:oh}=Qa,{mkdirpManual:ah,mkdirpManualSync:hh}=ih;var lh={mkdirpNative:(t,e)=>{e.recursive=!0;return rh(t)===t?e.mkdirAsync(t,e):nh(e,t).then((s=>e.mkdirAsync(t,e).then((()=>s)).catch((s=>{if("ENOENT"===s.code)return ah(t,e);throw s}))))},mkdirpNativeSync:(t,e)=>{e.recursive=!0;if(rh(t)===t)return e.mkdirSync(t,e);const s=oh(e,t);try{return e.mkdirSync(t,e),s}catch(s){if("ENOENT"===s.code)return hh(t,e);throw s}}};const ch=(process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version).replace(/^v/,"").split("."),uh=+ch[0]>10||10==+ch[0]&&+ch[1]>=12;var ph={useNative:uh?t=>t.mkdir===b.default.mkdir:()=>!1,useNativeSync:uh?t=>t.mkdirSync===b.default.mkdirSync:()=>!1};const{mkdirpNative:dh,mkdirpNativeSync:fh}=lh,{mkdirpManual:mh,mkdirpManualSync:yh}=ih,{useNative:gh,useNativeSync:Eh}=ph,wh=(t,e)=>(t=Wa(t),e=Za(e),gh(e)?dh(t,e):mh(t,e));wh.sync=(t,e)=>(t=Wa(t),e=Za(e),Eh(e)?fh(t,e):yh(t,e)),wh.native=(t,e)=>dh(Wa(t),Za(e)),wh.manual=(t,e)=>mh(Wa(t),Za(e)),wh.nativeSync=(t,e)=>fh(Wa(t),Za(e)),wh.manualSync=(t,e)=>yh(Wa(t),Za(e));var bh=wh;const Sh=b.default.lchown?"lchown":"chown",vh=b.default.lchownSync?"lchownSync":"chownSync",Rh=b.default.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),Oh=(t,e,s)=>{try{return b.default[vh](t,e,s)}catch(t){if("ENOENT"!==t.code)throw t}},_h=Rh?(t,e,s,i)=>r=>{r&&"EISDIR"===r.code?b.default.chown(t,e,s,i):i(r)}:(t,e,s,i)=>i,Ih=Rh?(t,e,s)=>{try{return Oh(t,e,s)}catch(i){if("EISDIR"!==i.code)throw i;((t,e,s)=>{try{b.default.chownSync(t,e,s)}catch(t){if("ENOENT"!==t.code)throw t}})(t,e,s)}}:(t,e,s)=>Oh(t,e,s),Th=process.version;let Ah=(t,e,s)=>b.default.readdir(t,e,s);/^v4\./.test(Th)&&(Ah=(t,e,s)=>b.default.readdir(t,s));const Lh=(t,e,s,i)=>{b.default[Sh](t,e,s,_h(t,e,s,(t=>{i(t&&"ENOENT"!==t.code?t:null)})))},Nh=(t,e,s,i,r)=>{if("string"==typeof e)return b.default.lstat(m.default.resolve(t,e),((n,o)=>{if(n)return r("ENOENT"!==n.code?n:null);o.name=e,Nh(t,o,s,i,r)}));if(e.isDirectory())kh(m.default.resolve(t,e.name),s,i,(n=>{if(n)return r(n);const o=m.default.resolve(t,e.name);Lh(o,s,i,r)}));else{const n=m.default.resolve(t,e.name);Lh(n,s,i,r)}},kh=(t,e,s,i)=>{Ah(t,{withFileTypes:!0},((r,n)=>{if(r){if("ENOENT"===r.code)return i();if("ENOTDIR"!==r.code&&"ENOTSUP"!==r.code)return i(r)}if(r||!n.length)return Lh(t,e,s,i);let o=n.length,a=null;const h=r=>{if(!a)return r?i(a=r):0==--o?Lh(t,e,s,i):void 0};n.forEach((i=>Nh(t,i,e,s,h)))}))},Dh=(t,e,s)=>{let i;try{i=((t,e)=>b.default.readdirSync(t,e))(t,{withFileTypes:!0})}catch(i){if("ENOENT"===i.code)return;if("ENOTDIR"===i.code||"ENOTSUP"===i.code)return Ih(t,e,s);throw i}return i&&i.length&&i.forEach((i=>((t,e,s,i)=>{if("string"==typeof e)try{const s=b.default.lstatSync(m.default.resolve(t,e));s.name=e,e=s}catch(t){if("ENOENT"===t.code)return;throw t}e.isDirectory()&&Dh(m.default.resolve(t,e.name),s,i),Ih(m.default.resolve(t,e.name),s,i)})(t,i,e,s))),Ih(t,e,s)};var Ch=kh;kh.sync=Dh;var $h=N((function(t){class e extends Error{constructor(t,e){super("Cannot extract through symbolic link"),this.path=e,this.symlink=t}get name(){return"SylinkError"}}class s extends Error{constructor(t,e){super(e+": Cannot cd into '"+t+"'"),this.path=t,this.code=e}get name(){return"CwdError"}}t.exports=(t,e,r)=>{const n=e.umask,o=448|e.mode,a=0!=(o&n),h=e.uid,l=e.gid,c="number"==typeof h&&"number"==typeof l&&(h!==e.processUid||l!==e.processGid),u=e.preserve,p=e.unlink,d=e.cache,f=e.cwd,y=(e,s)=>{e?r(e):(d.set(t,!0),s&&c?Ch(s,h,l,(t=>y(t))):a?b.default.chmod(t,o,r):r())};if(d&&!0===d.get(t))return y();if(t===f)return b.default.stat(t,((e,i)=>{!e&&i.isDirectory()||(e=new s(t,e&&e.code||"ENOTDIR")),y(e)}));if(u)return bh(t,{mode:o}).then((t=>y(null,t)),y);const g=m.default.relative(f,t).split(/\/|\\/);i(f,g,o,d,p,f,null,y)};const i=(t,e,s,n,o,a,h,l)=>{if(!e.length)return l(null,h);const c=t+"/"+e.shift();if(n.get(c))return i(c,e,s,n,o,a,h,l);b.default.mkdir(c,s,r(c,e,s,n,o,a,h,l))},r=(t,n,o,a,h,l,c,u)=>p=>{if(p){if(p.path&&m.default.dirname(p.path)===l&&("ENOTDIR"===p.code||"ENOENT"===p.code))return u(new s(l,p.code));b.default.lstat(t,((s,d)=>{if(s)u(s);else if(d.isDirectory())i(t,n,o,a,h,l,c,u);else if(h)b.default.unlink(t,(e=>{if(e)return u(e);b.default.mkdir(t,o,r(t,n,o,a,h,l,c,u))}));else{if(d.isSymbolicLink())return u(new e(t,t+"/"+n.join("/")));u(p)}}))}else i(t,n,o,a,h,l,c=c||t,u)};t.exports.sync=(t,i)=>{const r=i.umask,n=448|i.mode,o=0!=(n&r),a=i.uid,h=i.gid,l="number"==typeof a&&"number"==typeof h&&(a!==i.processUid||h!==i.processGid),c=i.preserve,u=i.unlink,p=i.cache,d=i.cwd,f=e=>{p.set(t,!0),e&&l&&Ch.sync(e,a,h),o&&b.default.chmodSync(t,n)};if(p&&!0===p.get(t))return f();if(t===d){let e=!1,i="ENOTDIR";try{e=b.default.statSync(t).isDirectory()}catch(t){i=t.code}finally{if(!e)throw new s(t,i)}return void f()}if(c)return f(bh.sync(t,n));const y=m.default.relative(d,t).split(/\/|\\/);let g=null;for(let t=y.shift(),i=d;t&&(i+="/"+t);t=y.shift())if(!p.get(i))try{b.default.mkdirSync(i,n),g=g||i,p.set(i,!0)}catch(t){if(t.path&&m.default.dirname(t.path)===d&&("ENOTDIR"===t.code||"ENOENT"===t.code))return new s(d,t.code);const r=b.default.lstatSync(i);if(r.isDirectory()){p.set(i,!0);continue}if(u){b.default.unlinkSync(i),b.default.mkdirSync(i,n),g=g||i,p.set(i,!0);continue}if(r.isSymbolicLink())return new e(i,i+"/"+y.join("/"))}return f(g)}})),xh=()=>{const t=new Map,e=new Map,{join:s}=m.default,i=new Set,r=s=>{const{paths:i,dirs:r}=(s=>{const i=e.get(s);if(!i)throw new Error("function does not have any path reservations");return{paths:i.paths.map((e=>t.get(e))),dirs:[...i.dirs].map((e=>t.get(e)))}})(s);return i.every((t=>t[0]===s))&&r.every((t=>t[0]instanceof Set&&t[0].has(s)))},n=t=>!(i.has(t)||!r(t))&&(i.add(t),t((()=>o(t))),!0),o=s=>{if(!i.has(s))return!1;const{paths:r,dirs:o}=e.get(s),a=new Set;return r.forEach((e=>{const i=t.get(e);_.default.equal(i[0],s),1===i.length?t.delete(e):(i.shift(),"function"==typeof i[0]?a.add(i[0]):i[0].forEach((t=>a.add(t))))})),o.forEach((e=>{const i=t.get(e);_.default(i[0]instanceof Set),1===i[0].size&&1===i.length?t.delete(e):1===i[0].size?(i.shift(),a.add(i[0])):i[0].delete(s)})),i.delete(s),a.forEach((t=>n(t))),!0};return{check:r,reserve:(i,r)=>{const o=new Set(i.map((t=>(t=>s(t).split(/[\\\/]/).slice(0,-1).reduce(((t,e)=>t.length?t.concat(s(t[t.length-1],e)):[e]),[]))(t))).reduce(((t,e)=>t.concat(e))));return e.set(r,{dirs:o,paths:i}),i.forEach((e=>{const s=t.get(e);s?s.push(r):t.set(e,[r])})),o.forEach((e=>{const s=t.get(e);s?s[s.length-1]instanceof Set?s[s.length-1].add(r):s.push(new Set([r])):t.set(e,[new Set([r])])})),n(r)}}};const Ph="win32"===(process.env.__FAKE_PLATFORM__||process.platform),Mh=L.__FAKE_TESTING_FS__||b.default,{O_CREAT:Fh,O_TRUNC:Bh,O_WRONLY:jh,UV_FS_O_FILEMAP:Uh=0}=Mh.constants,zh=Uh|Bh|Fh|jh;var Gh=Ph&&!!Uh?t=>t<524288?zh:"w":()=>"w";v.default.EventEmitter,$h.sync;const Hh=Symbol("onEntry"),Zh=Symbol("checkFs"),Xh=Symbol("checkFs2"),Vh=Symbol("isReusable"),qh=Symbol("makeFs"),Wh=Symbol("file"),Yh=Symbol("directory"),Kh=Symbol("link"),Jh=Symbol("symlink"),Qh=Symbol("hardlink"),tl=Symbol("unsupported"),el=Symbol("checkPath"),sl=Symbol("mkdir"),il=Symbol("onError"),rl=Symbol("pending"),nl=Symbol("pend"),ol=Symbol("unpend"),al=Symbol("ended"),hl=Symbol("maybeClose"),ll=Symbol("skip"),cl=Symbol("doChown"),ul=Symbol("uid"),pl=Symbol("gid"),dl=()=>{throw new Error("sync function called cb somehow?!?")},fl=(t,e,s)=>t===t>>>0?t:e===e>>>0?e:s;class ml extends Ba{constructor(t){if(t||(t={}),t.ondone=t=>{this[al]=!0,this[hl]()},super(t),this.reservations=xh(),this.transform="function"==typeof t.transform?t.transform:null,this.writable=!0,this.readable=!1,this[rl]=0,this[al]=!1,this.dirCache=t.dirCache||new Map,"number"==typeof t.uid||"number"==typeof t.gid){if("number"!=typeof t.uid||"number"!=typeof t.gid)throw new TypeError("cannot set owner without number uid and gid");if(t.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=t.uid,this.gid=t.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;void 0===t.preserveOwner&&"number"!=typeof t.uid?this.preserveOwner=process.getuid&&0===process.getuid():this.preserveOwner=!!t.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=!0===t.forceChown,this.win32=!!t.win32||"win32"===process.platform,this.newer=!!t.newer,this.keep=!!t.keep,this.noMtime=!!t.noMtime,this.preservePaths=!!t.preservePaths,this.unlink=!!t.unlink,this.cwd=m.default.resolve(t.cwd||process.cwd()),this.strip=+t.strip||0,this.processUmask=process.umask(),this.umask="number"==typeof t.umask?t.umask:this.processUmask,this.dmode=t.dmode||511&~this.umask,this.fmode=t.fmode||438&~this.umask,this.on("entry",(t=>this[Hh](t)))}warn(t,e,s={}){return"TAR_BAD_ARCHIVE"!==t&&"TAR_ABORT"!==t||(s.recoverable=!1),super.warn(t,e,s)}[hl](){this[al]&&0===this[rl]&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[el](t){if(this.strip){const e=t.path.split(/\/|\\/);if(e.length<this.strip)return!1;if(t.path=e.slice(this.strip).join("/"),"Link"===t.type){const e=t.linkpath.split(/\/|\\/);e.length>=this.strip&&(t.linkpath=e.slice(this.strip).join("/"))}}if(!this.preservePaths){const e=t.path;if(e.match(/(^|\/|\\)\.\.(\\|\/|$)/))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:t,path:e}),!1;if(m.default.win32.isAbsolute(e)){const s=m.default.win32.parse(e);t.path=e.substr(s.root.length);const i=s.root;this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:t,path:e})}}if(this.win32){const e=m.default.win32.parse(t.path);t.path=""===e.root?$n(t.path):e.root+$n(t.path.substr(e.root.length))}return m.default.isAbsolute(t.path)?t.absolute=t.path:t.absolute=m.default.resolve(this.cwd,t.path),!0}[Hh](t){if(!this[el](t))return t.resume();switch(_.default.equal(typeof t.absolute,"string"),t.type){case"Directory":case"GNUDumpDir":t.mode&&(t.mode=448|t.mode);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Zh](t);case"CharacterDevice":case"BlockDevice":case"FIFO":return this[tl](t)}}[il](t,e){"CwdError"===t.name?this.emit("error",t):(this.warn("TAR_ENTRY_ERROR",t,{entry:e}),this[ol](),e.resume())}[sl](t,e,s){$h(t,{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:e},s)}[cl](t){return this.forceChown||this.preserveOwner&&("number"==typeof t.uid&&t.uid!==this.processUid||"number"==typeof t.gid&&t.gid!==this.processGid)||"number"==typeof this.uid&&this.uid!==this.processUid||"number"==typeof this.gid&&this.gid!==this.processGid}[ul](t){return fl(this.uid,t.uid,this.processUid)}[pl](t){return fl(this.gid,t.gid,this.processGid)}[Wh](t,e){const s=4095&t.mode||this.fmode,i=new aa.WriteStream(t.absolute,{flags:Gh(t.size),mode:s,autoClose:!1});i.on("error",(e=>this[il](e,t)));let r=1;const n=s=>{if(s)return this[il](s,t);0==--r&&b.default.close(i.fd,(s=>{e(),s?this[il](s,t):this[ol]()}))};i.on("finish",(e=>{const s=t.absolute,o=i.fd;if(t.mtime&&!this.noMtime){r++;const e=t.atime||new Date,i=t.mtime;b.default.futimes(o,e,i,(t=>t?b.default.utimes(s,e,i,(e=>n(e&&t))):n()))}if(this[cl](t)){r++;const e=this[ul](t),i=this[pl](t);b.default.fchown(o,e,i,(t=>t?b.default.chown(s,e,i,(e=>n(e&&t))):n()))}n()}));const o=this.transform&&this.transform(t)||t;o!==t&&(o.on("error",(e=>this[il](e,t))),t.pipe(o)),o.pipe(i)}[Yh](t,e){const s=4095&t.mode||this.dmode;this[sl](t.absolute,s,(s=>{if(s)return e(),this[il](s,t);let i=1;const r=s=>{0==--i&&(e(),this[ol](),t.resume())};t.mtime&&!this.noMtime&&(i++,b.default.utimes(t.absolute,t.atime||new Date,t.mtime,r)),this[cl](t)&&(i++,b.default.chown(t.absolute,this[ul](t),this[pl](t),r)),r()}))}[tl](t){t.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${t.type}`,{entry:t}),t.resume()}[Jh](t,e){this[Kh](t,t.linkpath,"symlink",e)}[Qh](t,e){this[Kh](t,m.default.resolve(this.cwd,t.linkpath),"link",e)}[nl](){this[rl]++}[ol](){this[rl]--,this[hl]()}[ll](t){this[ol](),t.resume()}[Vh](t,e){return"File"===t.type&&!this.unlink&&e.isFile()&&e.nlink<=1&&"win32"!==process.platform}[Zh](t){this[nl]();const e=[t.path];t.linkpath&&e.push(t.linkpath),this.reservations.reserve(e,(e=>this[Xh](t,e)))}[Xh](t,e){this[sl](m.default.dirname(t.absolute),this.dmode,(s=>{if(s)return e(),this[il](s,t);b.default.lstat(t.absolute,((s,i)=>{i&&(this.keep||this.newer&&i.mtime>t.mtime)?(this[ll](t),e()):s||this[Vh](t,i)?this[qh](null,t,e):i.isDirectory()?"Directory"===t.type?t.mode&&(4095&i.mode)!==t.mode?b.default.chmod(t.absolute,t.mode,(s=>this[qh](s,t,e))):this[qh](null,t,e):b.default.rmdir(t.absolute,(s=>this[qh](s,t,e))):((t,e)=>{if("win32"!==process.platform)return b.default.unlink(t,e);const s=t+".DELETE."+A.default.randomBytes(16).toString("hex");b.default.rename(t,s,(t=>{if(t)return e(t);b.default.unlink(s,e)}))})(t.absolute,(s=>this[qh](s,t,e)))}))}))}[qh](t,e,s){if(t)return this[il](t,e);switch(e.type){case"File":case"OldFile":case"ContiguousFile":return this[Wh](e,s);case"Link":return this[Qh](e,s);case"SymbolicLink":return this[Jh](e,s);case"Directory":case"GNUDumpDir":return this[Yh](e,s)}}[Kh](t,e,s,i){b.default[s](e,t.absolute,(e=>{if(e)return this[il](e,t);i(),this[ol](),t.resume()}))}}ml.Sync=class extends ml{constructor(t){super(t)}[Zh](t){const e=this[sl](m.default.dirname(t.absolute),this.dmode,dl);if(e)return this[il](e,t);try{const s=b.default.lstatSync(t.absolute);if(this.keep||this.newer&&s.mtime>t.mtime)return this[ll](t);if(this[Vh](t,s))return this[qh](null,t,dl);try{return s.isDirectory()?"Directory"===t.type?t.mode&&(4095&s.mode)!==t.mode&&b.default.chmodSync(t.absolute,t.mode):b.default.rmdirSync(t.absolute):(t=>{if("win32"!==process.platform)return b.default.unlinkSync(t);const e=t+".DELETE."+A.default.randomBytes(16).toString("hex");b.default.renameSync(t,e),b.default.unlinkSync(e)})(t.absolute),this[qh](null,t,dl)}catch(e){return this[il](e,t)}}catch(e){return this[qh](null,t,dl)}}[Wh](t,e){const s=4095&t.mode||this.fmode,i=e=>{let s;try{b.default.closeSync(r)}catch(t){s=t}(e||s)&&this[il](e||s,t)};let r;try{r=b.default.openSync(t.absolute,Gh(t.size),s)}catch(t){return i(t)}const n=this.transform&&this.transform(t)||t;n!==t&&(n.on("error",(e=>this[il](e,t))),t.pipe(n)),n.on("data",(t=>{try{b.default.writeSync(r,t,0,t.length)}catch(t){i(t)}})),n.on("end",(e=>{let s=null;if(t.mtime&&!this.noMtime){const e=t.atime||new Date,i=t.mtime;try{b.default.futimesSync(r,e,i)}catch(r){try{b.default.utimesSync(t.absolute,e,i)}catch(t){s=r}}}if(this[cl](t)){const e=this[ul](t),i=this[pl](t);try{b.default.fchownSync(r,e,i)}catch(r){try{b.default.chownSync(t.absolute,e,i)}catch(t){s=s||r}}}i(s)}))}[Yh](t,e){const s=4095&t.mode||this.dmode,i=this[sl](t.absolute,s);if(i)return this[il](i,t);if(t.mtime&&!this.noMtime)try{b.default.utimesSync(t.absolute,t.atime||new Date,t.mtime)}catch(i){}if(this[cl](t))try{b.default.chownSync(t.absolute,this[ul](t),this[pl](t))}catch(i){}t.resume()}[sl](t,e){try{return $h.sync(t,{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:e})}catch(t){return t}}[Kh](t,e,s,i){try{b.default[s+"Sync"](e,t.absolute),t.resume()}catch(e){return this[il](e,t)}}};var yl=ml,gl=N((function(t){t.exports=(t,o,a)=>{"function"==typeof t?(a=t,o=null,t={}):Array.isArray(t)&&(o=t,t={}),"function"==typeof o&&(a=o,o=null),o=o?Array.from(o):[];const h=Tr(t);if(h.sync&&"function"==typeof a)throw new TypeError("callback not supported for sync tar functions");if(!h.file&&"function"==typeof a)throw new TypeError("callback only supported with file option");return o.length&&e(h,o),h.file&&h.sync?s(h):h.file?i(h,a):h.sync?r(h):n(h)};const e=(t,e)=>{const s=new Map(e.map((t=>[t.replace(/\/+$/,""),!0]))),i=t.filter,r=(t,e)=>{const i=e||m.default.parse(t).root||".",n=t!==i&&(s.has(t)?s.get(t):r(m.default.dirname(t),i));return s.set(t,n),n};t.filter=i?(t,e)=>i(t,e)&&r(t.replace(/\/+$/,"")):t=>r(t.replace(/\/+$/,""))},s=t=>{const e=new yl.Sync(t),s=t.file,i=b.default.statSync(s),r=t.maxReadSize||16777216;new aa.ReadStreamSync(s,{readSize:r,size:i.size}).pipe(e)},i=(t,e)=>{const s=new yl(t),i=t.maxReadSize||16777216,r=t.file,n=new Promise(((t,e)=>{s.on("error",e),s.on("close",t),b.default.stat(r,((t,n)=>{if(t)e(t);else{const t=new aa.ReadStream(r,{readSize:i,size:n.size});t.on("error",e),t.pipe(s)}}))}));return e?n.then(e,e):n},r=t=>new yl.Sync(t),n=t=>new yl(t)})),El=N((function(t,e){e.c=e.create=Ua,e.r=e.replace=za,e.t=e.list=ja,e.u=e.update=Ga,e.x=e.extract=gl,e.Pack=Ao,e.Unpack=yl,e.Parse=Ba,e.ReadEntry=rn,e.WriteEntry=eo,e.Header=Rn,e.Pax=An,e.types=en})),wl=["write","end","destroy"],bl=["resume","pause"],Sl=["data","close"],vl=Array.prototype.slice,Rl=function(t,e){var s=new R.default,i=!1;return Ol(wl,(function(e){function i(){return t[e].apply(t,arguments)}s[e]=i})),Ol(bl,(function(t){function i(){s.emit(t);var i=e[t];if(i)return i.apply(e,arguments);e.emit(t)}s[t]=i})),Ol(Sl,(function(t){function i(){var e=vl.call(arguments);e.unshift(t),s.emit.apply(s,e)}e.on(t,i)})),e.on("end",(function(){if(i)return;i=!0;var t=vl.call(arguments);t.unshift("end"),s.emit.apply(s,t)})),t.on("drain",(function(){s.emit("drain")})),t.on("error",r),e.on("error",r),s.writable=t.writable,s.readable=e.readable,s;function r(t){s.emit("error",t)}};function Ol(t,e){if(t.forEach)return t.forEach(e);for(var s=0;s<t.length;s++)e(t[s],s)}var _l=N((function(t){const{promisify:e}=w.default,s=t=>({level:9,...t}),i=e(T.default.gzip);t.exports=async(t,e)=>{if(!t)return 0;return(await i(t,s(e))).length},t.exports.sync=(t,e)=>T.default.gzipSync(t,s(e)).length,t.exports.stream=t=>{const e=new R.default.PassThrough,i=new R.default.PassThrough,r=Rl(e,i);let n=0;const o=T.default.createGzip(s(t)).on("data",(t=>{n+=t.length})).on("error",(()=>{r.gzipSize=0})).on("end",(()=>{r.gzipSize=n,r.emit("gzip-size",n),i.end()}));return e.pipe(o),e.pipe(i,{end:!1}),r},t.exports.file=(e,s)=>new Promise(((i,r)=>{const n=b.default.createReadStream(e);n.on("error",r);const o=n.pipe(t.exports.stream(s));o.on("error",r),o.on("gzip-size",i)})),t.exports.fileSync=(e,s)=>t.exports.sync(b.default.readFileSync(e),s)}));w.default.promisify(b.default.readFile);var Il=async function(t,e){const s=(t=>"string"==typeof t?Buffer.from(t,"utf8"):t)(t);return new Promise((function(t,i){var r,n;T.default.brotliCompress(s,(r=e,n=s,{params:{[T.default.constants.BROTLI_PARAM_MODE]:r&&"mode"in r&&r.mode||T.default.constants.BROTLI_DEFAULT_MODE,[T.default.constants.BROTLI_PARAM_QUALITY]:r&&"quality"in r&&r.quality||T.default.constants.BROTLI_MAX_QUALITY,[T.default.constants.BROTLI_PARAM_SIZE_HINT]:n?n.byteLength:0}}),((e,s)=>{null!==e&&i(e),t(s.byteLength)}))}))};const Tl=async t=>{const e=await async function(t){const e=[];for await(const s of t)e.push(s);return Buffer.concat(e)}(t),[s,i]=await Promise.all([_l(e),Il(e)]);return{path:t.path.replace(/^[^/]+\/?/,"/"),mode:t.mode,size:t.size,sizeGzip:s,sizeBrotli:i}};module.exports=async function(t=""){t=m.default.resolve(t);const e=await Ir(t),s=await(async t=>new Promise(((e,s)=>{const i=[];El.list({noResume:!0}).on("entry",(t=>{i.push(Tl(t))})).on("error",(t=>s(t))).on("finish",(()=>e(Promise.all(i)))).end(t)})))(e);return{pkgPath:t,tarballSize:e.length,files:s}};
